/*
Component: j-Approve
Version: 1
Updated: 2023-06-28T08:23:01.000Z
Author: Peter Širka


Component: j-BackToTop
Version: 1
Updated: 2023-01-23T09:30:00.000Z
Author: Martin Jirku


Component: j-Box
Version: 1
Updated: 2023-09-29T08:53:00.000Z
Author: Peter Širka


Component: j-Centered
Version: 1
Updated: 2023-01-26T21:08:01.000Z
Author: Peter Širka


Component: j-Checkboxlist
Version: 1
Updated: 2023-01-31T10:51:02.000Z
Author: Peter Širka


Component: j-Clipboard
Version: 1
Updated: 2023-01-23T10:55:00.000Z
Author: Peter Širka


Component: j-CloudEditor
Version: 1
Updated: 2023-01-23T10:54:00.000Z
Author: Peter Širka


Component: j-ColorPicker
Version: 1
Updated: 2023-03-15T08:58:19.000Z
Author: Denis Granec


Component: j-Directory
Version: 1
Updated: 2023-06-13T13:02:00.000Z
Author: Peter Širka


Component: j-ErrorHandler
Version: 1
Updated: 2023-01-25T13:13:00.000Z
Author: Peter Širka


Component: j-Exec
Version: 1
Updated: 2023-06-07T11:23:00.000Z
Author: Peter Širka


Component: j-FileBrowser
Version: 1
Updated: 2023-01-31T09:09:00.000Z
Author: Peter Širka


Component: j-Form
Version: 2
Updated: 2023-09-29T08:50:01.000Z
Author: Peter Širka


Component: j-Icons
Version: 1
Updated: 2023-03-07T20:40:00.000Z
Author: Peter Širka


Component: j-Importer
Version: 1
Updated: 2023-04-21T15:50:00.000Z
Author: Peter Širka


Component: j-Input
Version: 1
Updated: 2023-09-18T13:07:00.000Z
Author: Peter Širka


Component: j-Layout
Version: 1
Updated: 2023-03-07T18:48:50.000Z
Author: Peter Širka


Component: j-Loading
Version: 1
Updated: 2023-01-31T14:55:00.000Z
Author: Peter Širka


Component: j-Locale
Version: 1
Updated: 2023-06-28T20:28:00.000Z
Author: Peter Širka


Component: j-Menu
Version: 1
Updated: 2023-03-03T09:34:00.000Z
Author: Peter Širka


Component: j-Message
Version: 1
Updated: 2023-01-31T15:54:01.000Z
Author: Peter Širka


Component: j-Movable
Version: 1
Updated: 2023-08-02T12:35:00.000Z
Author: Peter Širka


Component: j-Notify
Version: 1
Updated: 2023-03-11T19:50:00.000Z
Author: Peter Širka


Component: j-Page
Version: 1
Updated: 2023-02-01T09:23:01.000Z
Author: Peter Širka


Component: j-RadioButton
Version: 1
Updated: 2023-02-01T10:23:00.000Z
Author: Peter Širka


Component: j-Ready
Version: 1
Updated: 2023-02-01T10:38:00.000Z
Author: Peter Širka


Component: j-Search
Version: 1
Updated: 2023-02-01T11:16:02.000Z
Author: Peter Širka


Component: j-SearchInput
Version: 1
Updated: 2023-02-01T11:21:03.000Z
Author: Peter Širka


Component: j-Selected
Version: 1
Updated: 2023-03-05T10:55:00.000Z
Author: Peter Širka


Component: j-Shortcuts
Version: 1
Updated: 2023-02-01T12:12:00.000Z
Author: Peter Širka


Component: j-Spotlight
Version: 1
Updated: 2023-01-31T12:17:04.000Z
Author: Peter Širka


Component: j-TabMenu
Version: 1
Updated: 2023-01-31T11:35:01.000Z
Author: Peter Širka


Component: j-TextboxList
Version: 1
Updated: 2023-03-05T13:12:00.000Z
Author: Peter Širka


Component: j-Validate
Version: 1
Updated: 2023-07-20T12:39:00.000Z
Author: Peter Širka


Component: j-Validation
Version: 1
Updated: 2023-07-20T12:39:00.000Z
Author: Peter Širka


Component: j-ViewBox
Version: 1
Updated: 2023-01-21T21:38:00.000Z
Author: Peter Širka
*/

CSS(`.ui-approve-noscroll,.ui-approve-noscroll body{overflow:hidden}.ui-approve{background-color:rgba(255,255,255,0.9);position:fixed;left:0;right:0;bottom:0;top:0;z-index:100;width:100%;display:table;height:100%;transition:0.5s all;opacity:0}.ui-approve > div{display:table-cell;vertical-align:middle;text-align:center;color:#FFF;padding:15px}.ui-approve-body{color:#000;padding:0;position:relative;display:inline-block;max-width:300px;text-align:left;transform:scale(0.8);transition:0.15s all;border:0;background-color:#FFF;box-shadow:0 0 30px rgba(0,0,0,0.1)}.ui-approve-content{padding:50px 30px;text-align:center}.ui-approve-content > i{font-size:50px;display:block;margin-bottom:10px}.ui-approve-buttons{height:40px}.ui-approve button{font-size:12px;float:left;cursor:pointer;outline:0;background-color:#E0E0E0;border:0;border-radius:0;color:gray;padding:0;width:50%;height:40px;font-weight:normal;margin:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.ui-approve button i{margin-right:5px}.ui-approve button:hover{opacity:0.9}.ui-approve-close{position:absolute;color:#C0C0C0;font-size:11px;right:8px;top:5px;cursor:pointer}.ui-approve-close:hover{color:#A0A0A0}.ui-approve-visible{opacity:1}.ui-approve-visible .ui-approve-body{-webkit-transform:scale(1);transform:scale(1)}.ui-approve-click{transform:scale(1.07) !important}.ui-dark .ui-approve{background-color:rgba(0,0,0,0.9)}.ui-dark .ui-approve-body{background-color:#202020}.ui-dark .ui-approve-content{border-bottom-color:#303030;color:#FFF}.ui-dark .ui-approve button{background-color:#505050;color:#C0C0C0}.ui-dark .ui-approve-close{color:#505050}.ui-dark .ui-approve-close:hover{color:#888}.ui-approve button[data-index='0']{color:#FFF;font-weight:bold;font-weight:bold;background-color:#EC2C28}@media(max-width:340px){.ui-approve button{display:block;margin:8px 0 0;display:block;width:100%;height:34px;font-size:13px}}

.ui-backtotop{visibility:hidden;position:fixed;right:25px;bottom:20px;transform:translate3d(55px,0,0);transition:transform 0.65s,visibility 0.65s cubic-bezier(0,0,0,1);z-index:50}.ui-backtotop.active{visibility:visible;transform:translate3d(0,0,0);transition:transform 0.65s}.ui-backtotop span{color:#bbb;font-size:30px;transition:color 0.8s}.ui-backtotop span:hover{color:#888;transition:color 0.8s}

.ui-box-noscroll,.ui-box-noscroll body{overflow:hidden}.ui-box-container{width:100%;position:fixed;left:0;top:0;bottom:0;right:0;z-index:5;overflow:hidden;transform-style:preserve-3d}.ui-box-bg{background-color:rgba(230,233,237,0.8)}.ui-box-nobg .ui-box{border:1px solid #E9E9E9}.ui-box-transparent{pointer-events:none}.ui-box{background-color:#FFF;border-radius:3px;box-shadow:0 10px 30px rgba(0,0,0,0.1);transform:scale(0);transition:all 0.15s;opacity:0;text-align:left;position:relative;margin:0 auto;pointer-events:all}.ui-box-animate{transform:scale(1);opacity:1}.ui-box-title{padding:0 10px 0 var(--gap);line-height:57px;font-size:16px;user-select:none;color:#000;background-color:#FFF;border-bottom:1px solid #E0E0E0;height:58px;border-radius:3px 3px 0 0}.ui-box-title .ui-box-button-close{float:right;cursor:pointer;font-size:18px;margin:1px 0 0;background:none;border:0;outline:0;height:auto;color:red;text-align:right !important;width:20px;padding:0}.ui-box-title .ui-box-button-close:hover{transform:scale(1.1)}.ui-box-title > nav{float:right;margin-right:18px;font-size:14px}.ui-box-title > nav button{border:0;margin:15px 0 0;background-color:#F0F0F0;height:28px;padding:0 10px;color:#000;cursor:pointer;font-family:Arial;line-height:23px;vertical-align:middle;outline:0;font-size:12px;text-decoration:none;transition:all 0.3s;float:left;border-left:1px solid #E0E0E0}.ui-box-title > nav button i{width:12px;text-align:center;margin-right:5px}.ui-box-title > nav button:hover{opacity:0.8}.ui-box-title > nav button:active{background-color:#D0D0D0}.ui-box-title > nav button:disabled{background-color:#F5F5F5 !important;border-color:#E0E0E0 !important;color:silver !important;cursor:not-allowed;box-shadow:none}.ui-box-title > nav button:disabled i{color:silver !important}.ui-box-title > nav button:first-child{border-top-left-radius:var(--radius);border-bottom-left-radius:var(--radius);border-left:0}.ui-box-title > nav button:last-child{border-top-right-radius:var(--radius);border-bottom-right-radius:var(--radius)}.ui-box-title i{margin-right:7px}.ui-form-title > span{font-weight:bold}.ui-box > nav{padding:0 15px 0;border-top:1px solid #E0E0E0;background-color:#FFF;border-radius:0 0 3px 3px;line-height:65px;height:65px;display:block;float:none;width:100%}.ui-box > nav button{border:0;margin:15px 0 0;background-color:#F0F0F0;height:34px;padding:0 20px;color:#000;cursor:pointer;font-family:Arial;line-height:34px;vertical-align:middle;outline:0;font-size:14px;text-decoration:none;transition:all 0.3s;float:left;width:50%}.ui-box > nav button i{width:15px;text-align:center;margin-right:5px}.ui-box > nav button:hover{opacity:0.8}.ui-box > nav button:active{background-color:#D0D0D0}.ui-box > nav button:disabled{background-color:#F5F5F5 !important;border-color:#E0E0E0 !important;color:silver !important;cursor:not-allowed;box-shadow:none}.ui-box > nav button:disabled i{color:silver !important}.ui-box > nav button:first-child{border-top-left-radius:var(--radius);border-bottom-left-radius:var(--radius)}.ui-box > nav button:last-child{border-top-right-radius:var(--radius);border-bottom-right-radius:var(--radius)}.ui-box > nav button[name='submit']{font-weight:bold;background-color:var(--color);color:#FFF}.ui-box-style-2 .ui-box{border-bottom-right-radius:0;border-bottom-left-radius:0}.ui-box-style-3 .ui-box{border-top-right-radius:0;border-top-left-radius:0}.ui-box-align-left{margin:0 auto 0 0}.ui-box-align-right{margin:0 0 0 auto}.ui-dark .ui-box{background-color:#202020}.ui-dark .ui-box-bg{background-color:rgba(50,50,50,0.9)}.ui-dark .ui-box-nobg .ui-box{border-color:#333}.ui-dark .ui-box-title{background-color:#202020;border-bottom-color:#303030;color:#FFF}.ui-dark .ui-box-title > nav{background-color:#202020;border-top-color:#303030}.ui-dark .ui-box-title > nav button{border-color:#404040;background-color:#505050;color:#E0E0E0}.ui-dark .ui-box-title > nav button:active{background-color:#404040}.ui-dark .ui-box-title > nav button:disabled i{color:#606060 !important}.ui-dark .ui-box-title > nav button:disabled{background-color:#303030 !important;color:#606060 !important;border-color:#202020 !important}.ui-dark .ui-box > nav{background-color:#202020;border-top-color:#303030}.ui-dark .ui-box > nav button{border-color:#202020;background-color:#505050;color:#F0F0F0}.ui-dark .ui-box > nav button[name='submit']{background-color:var(--color)}.ui-dark .ui-box > nav button:active{background-color:#404040}.ui-dark .ui-box > nav button:disabled i{color:#606060 !important}.ui-dark .ui-box > nav button:disabled{background-color:#303030 !important;color:#606060 !important;border-color:#202020 !important}@media(max-width:767px){.ui-box-container{background:none;padding:0 !important}.ui-box{border-radius:0;max-width:none !important;width:100% !important}}

.ui-centered-noscroll,.ui-centered-noscroll body{overflow:hidden}.ui-centered-container{position:fixed;width:100%;height:100%;z-index:5;background-color:rgba(255,255,255,0.95);left:0;top:0}.ui-centered-body{display:table-cell;vertical-align:middle;text-align:center}.ui-centered-content{display:table;width:100%;height:100%}.ui-centered-button{font-size:14px;color:#A0A0A0;position:absolute;right:15px;top:15px;cursor:pointer;opacity:0.7;transition:all 0.3s;width:24px;height:24px;text-align:center;line-height:24px;z-index:2}.ui-centered-button:active{top:21px}.ui-centered-button:hover{opacity:1}.ui-dark .ui-centered-container{background-color:rgba(20,20,20,0.95)}.ui-dark .ui-centered-button{color:#777}

.ui-checkboxlist-checkbox{line-height:16px;font-size:12px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.ui-checkboxlist-label i{margin-right:5px}.ui-checkboxlist-label{margin-bottom:10px;font-size:12px;border-bottom:1px solid #E0E0E0;padding-bottom:3px;color:#777}.ui-checkboxlist-required .ui-checkboxlist-label:before{color:red;content:'*';margin-right:3px}.ui-checkboxlist-item{cursor:pointer;padding-bottom:4px;font-size:13px}.ui-checkboxlist-item span{cursor:pointer;vertical-align:middle}.ui-checkboxlist-item div{position:relative;display:inline-block;width:20px;height:20px;padding:3px 0 0;border:1px solid #D0D0D0;margin-right:6px;vertical-align:middle;cursor:pointer;color:#FFF;font-size:11px;text-align:center;background-color:#FFF;border-radius:var(--radius)}.ui-checkboxlist-item i{display:none}.ui-checkboxlist-checked div{color:#000}.ui-checkboxlist-checked i{display:block !important}.ui-checkboxlist.ui-disabled .ui-checkboxlist-item div{background-color:#F0F0F0 !important;border-color:#E0E0E0 !important;color:gray !important}.ui-dark .ui-checkboxlist-label{border-bottom-color:#404040;color:#A0A0A0}.ui-dark .ui-checkboxlist-item div{border-color:#3A3A3A;background-color:#303030}.ui-dark .ui-checkboxlist-checked div{background-color:var(--color);border-color:var(--color)}.ui-dark .ui-checkbox.ui-disabled div{background-color:#303030 !important;border-color:#3A3A3A !important;color:gray !important}.ui-dark .ui-checkboxlist.ui-disabled .ui-checkboxlist-item div{background-color:#303030 !important;border-color:#3A3A3A !important;color:gray !important}

.ui-clipboard{position:absolute;left:-100px;top:-100px;height:1px;width:1px}

.ui-colorpicker-container{position:absolute;z-index:109}.ui-colorpicker{border:1px solid #E0E0E0;font-size:14px;color:#000;width:254px;background-color:#FFF;box-shadow:0 5px 10px rgba(0,0,0,0.08);border-radius:var(--radius);overflow:hidden;margin:0;padding:7px 0 3px}.ui-colorpicker-body{text-align:center}.ui-colorpicker-body div:nth-child(1){margin-bottom:0}.ui-colorpicker-body div:nth-child(2){margin-bottom:8px;padding-bottom:2px;border-bottom:1px solid #E0E0E0}.ui-colorpicker-cell{cursor:pointer;width:20px;height:16px;display:inline-block;vertical-align:top}.ui-colorpicker-cell span{display:block;height:16px;margin:0 2px;border-radius:2px;border:1px solid rgba(0,0,0,0.1);font-size:9px;line-height:15px;color:red}.ui-colorpicker-body span:hover{border-color:rgba(0,0,0,0.3)}.ui-dark .ui-colorpicker{background-color:#252525;border-color:#404040}.ui-dark .ui-colorpicker-cell span{border-color:rgba(255,255,255,0.1)}.ui-dark .ui-colorpicker-cell span:hover{border-color:rgba(255,255,255,0.5)}.ui-dark .ui-colorpicker-body div:nth-child(2){border-bottom-color:#404040}

.ui-directory-area{position:absolute;left:0;top:0;right:0;bottom:0;z-index:99}.ui-directory{position:absolute;opacity:0;transition:0.25s transform cubic-bezier(0.23,1,0.32,1);left:-100;top:-100;z-index:100;box-shadow:0 1px 20px rgba(0,0,0,0.1);background-color:#FFF;border-radius:var(--radius);border:1px solid #E0E0E0;overflow:hidden;transition:all 0.2s}.ui-directory-search{height:42px;background:#FFF;border-radius:var(--radius) var(--radius) 0 0;border-bottom:1px solid #E0E0E0;line-height:26px}.ui-directory-search input{width:100%;background-color:#FFF;border:0;font-size:14px;outline:0;padding:0;margin:0;line-height:28px;outline:0}.ui-directory-search > div{margin:0 22px 0 35px;padding:6px 10px 0 0;line-height:24px}.ui-directory-search > span{float:left;width:16px;text-align:center;padding:7px 0 0 12px;font-size:14px}.ui-directory-add{float:right !important;padding-left:0 !important;color:#83c83c;text-align:left !important;font-size:14px !important;cursor:pointer;width:24px !important;font-weight:bold;padding-top:8px}.ui-directory .ui-disabled{color:#A0A0A0 !important;cursor:not-allowed}.ui-directory-search .ti-times{color:red;cursor:pointer}.ui-directory-visible{opacity:1}.ui-directory-container{height:180px;overflow-x:hidden;overflow-y:auto;overflow-scrolling:touch;margin:0 30px 0 0;padding:0}.ui-directory ul{list-style-type:none;margin:0;padding:0}.ui-directory .selected{background-color:#F8F8F8;color:#000}.ui-directory .current{background-color:#F2F2F2;color:#000}.ui-directory-default li{padding:0 40px 0 10px;height:32px;line-height:32px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.ui-directory li{border-bottom:1px solid #F0F0F0;font-size:14px;background-color:#FFF;cursor:pointer;margin:0}.ui-directory-checkbox{width:16px;height:16px;float:left;border:1px solid #D0D0D0;border-radius:var(--radius);font-size:10px;line-height:16px;margin:8px 6px 0 0;text-align:center;background-color:#FFF}.ui-directory-checkbox i{visibility:hidden}.ui-directory .selected .ui-directory-checkbox{background-color:#4285F4;border-color:#4285F4;color:#FFF}.ui-directory .selected .ui-directory-checkbox i{visibility:visible}.ui-directory li:last-child{border-bottom:0}.ui-directory-search-hidden .ui-directory-search{height:0;overflow:hidden;opacity:0}.ui-dark .ui-directory .ui-disabled{color:#666 !important}.ui-dark .ui-directory{background-color:#303030;border-color:#404040;box-shadow:1px 5px 10px rgba(0,0,0,0.2)}.ui-dark .ui-directory-search{background:#303030}.ui-dark .ui-directory li{background-color:#303030;border-color:#404040}.ui-dark .ui-directory-search{border-bottom-color:#404040}.ui-dark .ui-directory-search input{background-color:#303030}.ui-dark .ui-directory-add:hover{color:#FFF}.ui-dark .ui-directory-checkbox{border-color:#484848;background-color:#404040}.ui-dark .ui-directory .selected{background-color:#2D2D2D;color:#FFF}.ui-dark .ui-directory .current{background-color:#373737;color:#FFF}

.exec{cursor:pointer}

.ui-form-noscroll,.ui-form-noscroll body{overflow:hidden}.ui-form-container{width:100%;position:fixed;left:0;top:0;bottom:0;right:0;background-color:rgba(230,233,237,0.8);z-index:5;overflow-y:scroll;transform-style:preserve-3d;overflow-scrolling:touch}.ui-form{background-color:#FFF;margin:0 auto 30px;border-radius:var(--radius);box-shadow:0 2px 30px rgba(0,0,0,0.10);transform:translate(0,-500px);transition:all 0.2s;opacity:0}.ui-form-animate{transform:skewX(0deg);opacity:1}.ui-form .padding{padding:15px}.ui-form-title{padding:18px 15px;font-size:16px;user-select:none;color:#000;background-color:#FFF;border-bottom:1px solid #E0E0E0;height:58px}.ui-form-title .ui-form-button-close{float:right;cursor:pointer;font-size:18px;margin:-2px 0 0;transition:all 0.2s;background:none;border:0;outline:0;height:auto;color:red;text-align:right !important;width:20px;padding:0}.ui-form-title .ui-form-button-close:hover{transform:scale(1.2)}.ui-form-title > i{margin-right:7px}.ui-form > nav{padding:0 15px 0;border-top:1px solid #E0E0E0;background-color:#FFF;border-radius:0 0 var(--radius) var(--radius);line-height:65px;height:65px;display:block;float:none;position:relative}.ui-form > nav button{border:0;margin:15px 0 0;background-color:#F0F0F0;height:34px;padding:0 20px;color:#000;cursor:pointer;font-family:Arial;line-height:34px;vertical-align:middle;outline:0;font-size:14px;text-decoration:none;transition:all 0.3s;float:left;width:50%}.ui-form > nav button i{width:15px;text-align:center;margin-right:5px}.ui-form > nav button:hover{opacity:0.9}.ui-form-title > span{font-weight:bold}.ui-form > nav button:active{background-color:#D0D0D0}.ui-form > nav button:disabled{background-color:#F5F5F5 !important;border-color:#E0E0E0 !important;color:silver !important;cursor:not-allowed;box-shadow:none}.ui-form > nav button:first-child{border-top-left-radius:var(--radius);border-bottom-left-radius:var(--radius)}.ui-form > nav button:last-child{border-top-right-radius:var(--radius);border-bottom-right-radius:var(--radius)}.ui-form > nav button[name='submit']{font-weight:bold;background-color:var(--color);color:#FFF}.ui-dark .ui-form-container{background-color:rgba(50,50,50,0.9)}.ui-dark .ui-form{background-color:#202020}.ui-dark .ui-form-title{background-color:#202020;border-bottom-color:#303030;color:#FFF}.ui-dark .ui-form > nav{background-color:#202020;border-top-color:#303030}.ui-dark .ui-form > nav button{border-color:#202020;background-color:#505050;color:#E0E0E0}.ui-dark .ui-form > nav button[name='submit']{background-color:var(--color)}.ui-dark .ui-form > nav button:active{background-color:#404040}.ui-dark .ui-form > nav button:disabled{background-color:#303030 !important;color:#606060 !important;border-color:#202020 !important}@media(max-width:767px){.ui-form-container-padding{padding:0}.ui-form > nav button[name='submit']{max-width:180px}}@media(max-width:350px){.ui-form-container-padding{padding:0}.ui-form > nav button[name='submit']{max-width:150px}}

.ui-icons-area{position:absolute;left:0;right:0;bottom:0;top:0;z-index:100}.ui-icons-container{position:absolute;z-index:1;border:1px solid #E0E0E0;font-size:14px;color:#000;width:330px;background-color:#FFF;box-shadow:0 5px 10px rgba(0,0,0,0.08);border-radius:var(--radius);overflow:hidden}.ui-icons-header{height:50px;background-color:#fcfcfc;border-bottom:1px solid #e0e0e0;padding:10px 0 0}.ui-icons-nav{padding:13px 5px 6px;text-align:center}.ui-icons-nav span{cursor:pointer;font-size:24px;width:11%;display:inline-block;user-select:none}.ui-icons-search{padding:0 10px}.ui-icons-search span{float:left;width:30px;text-align:center;height:30px;padding:7px 0 0;font-size:12px;background-color:#FFF;border:1px solid #e0e0e0;border-radius:var(--radius) 0 0 var(--radius);color:#A0A0A0;cursor:pointer}.ui-icons-search .ti-times{color:#ff0000}.ui-icons-search div{margin-left:30px}.ui-icons-search-input{margin:0;width:100%;border:1px solid #e0e0e0;padding:0 9px;height:30px;border-radius:0 var(--radius) var(--radius) 0;border-left:0;appearance:none}.ui-icons-search-input:focus{outline:none}.ui-icons-scroll{overflow:auto;height:305px}.ui-icons-content{position:relative;padding:5px}.ui-icons-content span{padding:5px;cursor:pointer;font-size:20px;width:12.5%;height:30px;display:inline-block;text-align:center;user-select:none;color:#404040}.ui-icons-content span:hover{transform:scale(1.15);color:#000}.ui-icons-scrollbar{height:305px}.ui-dark .ui-icons-container{background-color:#202020;border-color:#303030}.ui-dark .ui-icons-header{background-color:#202020;border-color:#303030}.ui-dark .ui-icons-content{color:#A0A0A0}.ui-dark .ui-icons-search span{background-color:#252525;border-color:#303030;color:#A0A0A0}.ui-dark .ui-icons-search-input{border-color:#303030;background-color:#1f1f1f;color:#FFF}.ui-dark .ui-icons-content span{color:#A0A0A0}.ui-dark .ui-icons-content span:hover{color:#FFF}@media(max-width:767px){.ui-icons .ui-icons-nav span{cursor:pointer;font-size:26px}.ui-icons .ui-icons-content span{min-width:45px}}

.ui-input{position:relative;font-size:13px}.ui-input textarea{tab-size:2;overflow-y:scroll;-ms-overflow-style:none;scrollbar-width:none;background:transparent}.ui-input textarea:::-webkit-scrollbar{display:none}.ui-input-required .ui-input-control{border-color:#D0D0D0}.ui-input-label{margin-bottom:3px;font-size:12px;color:#777}.ui-input-label i{margin-right:4px}.ui-input-required.ui-input-raw .ui-input-label:before{content:'*';color:red;margin-right:3px}.ui-input-control{border:1px solid #E0E0E0;border-radius:var(--radius);min-height:36px;background-color:#FFF}.ui-input-input{padding:6px 8px 0;position:relative;line-height:24px}.ui-input-checkbox{margin-bottom:5px}.ui-input-checkbox *{height:25px;cursor:pointer}.ui-input-checkbox span{width:20px;height:20px;line-height:21px;font-size:11px;margin:0 7px 0 0;text-align:center;float:left;border:1px solid #D0D0D0;border-radius:4px;background:#FFF}.ui-input-checkbox span i{display:none;font-weight:bold}.ui-input-checkbox label{line-height:19px}.ui-input-checked .ui-input-checkbox span i{display:inline-block}.ui-disabled .ui-input-checkbox{color:#A0A0A0}.ui-disabled.ui-input *, .ui-disabled.ui-input{cursor:not-allowed !important}.ui-disabled .ui-input-checkbox span{background-color:#F0F0F0;color:#B0B0B0;border-color:#E0E0E0}.ui-input-placeholder{pointer-events:none;position:absolute;color:gray;margin:0;user-select:none;width:100%;text-align:left;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.ui-input-control input, .ui-input-control textarea{border:0;outline:0;background:transparent !important;width:100%;padding:0;margin:0;line-height:16px;font-size:13px;color:#000;font-family:Arial;resize:none}.ui-input-control textarea{padding:4px 0}.ui-input-control .ui-input-value{line-height:24px;height:22px;cursor:pointer;border-radius:var(--radius);outline:0}.ui-input-control input::-ms-expand{display:none}.ui-input-icon-left{width:34px;height:34px;line-height:33px;float:left;text-align:center;border-right:1px solid #E0E0E0}.ui-input-icon-right{width:34px;height:34px;line-height:33px;float:right;border-left:1px solid #E0E0E0;text-align:center}.ui-input-required .ui-input-icon-left{border-color:#D0D0D0}.ui-input-required .ui-input-icon-right{border-color:#D0D0D0}.ui-input-ricon .ui-input-input{margin-right:37px}.ui-input-licon .ui-input-input{margin-left:34px}.ui-input-ricon .ti-times, .ui-input-licon .ti-times{color:red}.ui-input-value{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.ui-input-click{cursor:pointer}.ui-input-error{margin-top:7px;font-size:11px;color:red}.ui-input .right input{text-align:right}.ui-input .right .ui-input-placeholder{text-align:right;padding-right:15px}.ui-input .center input{text-align:center}.ui-input .center .ui-input-placeholder{text-align:center;padding-right:15px}.ui-input-dropdown, .ui-input-dropdown input, .ui-input-dropdown .ui-input-placeholder{cursor:pointer}.ui-input-invalid .ui-input-control, .ui-input-invalid .ui-input-icon-left, .ui-input-invalid .ui-input-icon-right{border-color:red !important}.ui-input.ui-disabled .ui-input-control{background-color:#F0F0F0;color:#777}.ui-input.ui-disabled input{background-color:#F0F0F0;color:#A0A0A0}.ui-input.ui-disabled .ui-input-placeholder{color:#A0A0A0}.ui-input.ui-disabled .ui-input-icon-left, .ui-input.ui-disabled .ui-input-icon-right{color:gray}.ui-input-dropdown.ui-disabled .ui-input-control{cursor:not-allowed !important}.ui-input-raw .ui-input-increment{padding:7px 0 0 !important}.ui-input-increment i{line-height:11px;font-size:10px;cursor:pointer;display:block}.ui-input-increment i:first-child{margin-left:0}.ui-input-required.ui-input-inner .ui-input-label:after{content:'*';color:red;margin-left:3px}.ui-input-inner{background-color:#F5F5F5;border:1px solid #E5E5E5;padding:10px 5px 10px 10px;width:100%;border-radius:var(--radius)}.ui-input-inner.ui-disabled .ui-input-control{background-color:transparent !important}.ui-input-inner .ui-input-increment{padding-top:2px;color:#777}.ui-input-inner .ui-input-label{height:18px;margin:0;color:#6A7280;font-weight:bold}.ui-input-inner .ui-input-placeholder{color:#9DA4B0}.ui-input-inner input, .ui-input-inner textarea{font-size:14px}.ui-input-inner .ui-input-input{padding:0;font-size:14px}.ui-input-inner .ui-input-control{min-height:24px;border:0;background-color:transparent}.ui-input-inner .ui-input-icon-left, .ui-input-inner .ui-input-icon-right{height:24px;line-height:24px;color:#777;font-size:15px}.ui-input-inner.ui-input-focused{border-color:var(--color);box-shadow:0 0 #0000,0 0 #0000,0px 0px 0px 4px #4AAEFF1A}.ui-input-inner.ui-input-invalid{border-color:#EEB7B7;box-shadow:0 0 #0000,0 0 #0000,0px 0px 0px 4px #D85A5A1A}.ui-input-inner .ui-input-checkbox{margin-bottom:0}.ui-input-inner .ui-input-icon-right{border:0;padding-left:10px}.ui-input-masked input{letter-spacing:1px;font-family:Menlo,Consolas,monospace}.ui-input-monospace input, .ui-input-monospace textarea{font-family:Menlo,Consolas,monospace}.ui-input-icon-custom{font-size:11px}.ui-input-inner .ui-input-value{line-height:24px;height:24px}.ui-input-type-icon .ui-input-value, .ui-input-type-emoji .ui-input-value{font-size:15px}.ui-input-type-icon .ui-input-control, .ui-input-type-color .ui-input-control, .ui-input-type-color .ui-input-emoji{cursor:pointer}.ui-dark .ui-input-required .ui-input-control{border-color:#505050}.ui-dark .ui-input-raw .ui-input-control{border-color:#404040;background-color:#202020 !important;box-shadow:0 1px 4px rgba(0,0,0,0.3)}.ui-dark .ui-input-required .ui-input-icon-left{border-color:#404040}.ui-dark .ui-input-required .ui-input-icon-right{border-color:#404040}.ui-dark .ui-input-control input, .ui-dark .ui-input-control textarea{background-color:transparent;color:#FFF}.ui-dark .ui-input-icon-left, .ui-dark .ui-input-icon-right{border-color:#303030;color:gray}.ui-dark .ui-input.ui-disabled .ui-input-control{background-color:#282828;color:#999}.ui-dark .ui-input.ui-disabled input{background-color:#282828;color:#777}.ui-dark .ui-input.ui-disabled .ui-input-placeholder{color:#777}.ui-dark .ui-input-checkbox span{border-color:#404040;background:#252525}.ui-dark .ui-input-inner{background-color:#252525;border-color:#303030}.ui-dark .ui-input-inner.ui-disabled .ui-input-control{background-color:transparent !important}.ui-dark .ui-input-inner.ui-input-focused{border-color:var(--color);box-shadow:0 0 #0000,0 0 #0000,0px 0px 0px 4px #4AAEFF3F}.ui-dark .ui-input-inner.ui-input-invalid{border-color:#8E3D3D;box-shadow:0 0 #0000,0 0 #0000,0px 0px 0px 4px #D85A5A42}.ui-dark .ui-disabled .ui-input-checkbox span{background-color:#282828;color:#999;border-color:#303003}.ui-dark .ui-disabled .ui-input-checkbox{color:#666}

.ui-layout{border:0;position:absolute;z-index:1}.ui-layout > section{position:absolute;overflow:hidden}.ui-layout > div{position:absolute}.ui-layout-resize-top{height:2px;cursor:row-resize}.ui-layout-resize-bottom{height:2px;cursor:row-resize}.ui-layout-resize-left{width:2px;cursor:col-resize}.ui-layout-resize-right{width:2px;cursor:col-resize}.ui-layout-resize{z-index:2;user-select:none}.ui-layout-resize:hover{background-color:#C0C0C0}.ui-layout-drag{background-color:#C0C0C0}.ui-layout-section{background-color:#F0F0F0}.ui-layout-lock{background-color:rgba(222,222,222,0.8);z-index:100}.ui-dark .ui-layout-section{background-color:#282828}.ui-dark .ui-layout-resize:hover{background-color:#505050}.ui-dark .ui-layout-lock{background-color:rgba(34,34,34,0.8)}

.ui-loading{position:fixed;width:100%;height:100%;background-color:rgba(255,255,255,0.8);left:0;top:0;z-index:1000}.ui-loading-1 > div{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzgiIGhlaWdodD0iMzgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IHgxPSI4LjA0MiUiIHkxPSIwJSIgeDI9IjY1LjY4MiUiIHkyPSIyMy44NjUlIiBpZD0iYSI+PHN0b3Agc3RvcC1jb2xvcj0iI0EwQTBBMCIgc3RvcC1vcGFjaXR5PSIwIiBvZmZzZXQ9IjAlIi8+PHN0b3Agc3RvcC1jb2xvcj0iI0EwQTBBMCIgc3RvcC1vcGFjaXR5PSIuNjMxIiBvZmZzZXQ9IjYzLjE0NiUiLz48c3RvcCBzdG9wLWNvbG9yPSIjQTBBMEEwIiBvZmZzZXQ9IjEwMCUiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxIDEpIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zNiAxOGMwLTkuOTQtOC4wNi0xOC0xOC0xOCIgc3Ryb2tlPSJ1cmwoI2EpIiBzdHJva2Utd2lkdGg9IjIiPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDE4IDE4IiB0bz0iMzYwIDE4IDE4IiBkdXI9IjAuOXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC9wYXRoPjxjaXJjbGUgZmlsbD0iI0EwQTBBMCIgY3g9IjM2IiBjeT0iMTgiIHI9IjEiPjxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0icm90YXRlIiBmcm9tPSIwIDE4IDE4IiB0bz0iMzYwIDE4IDE4IiBkdXI9IjAuOXMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+PC9jaXJjbGU+PC9nPjwvc3ZnPg==) no-repeat 50% 50%;background-size:80px 80px;width:80px;height:80px;position:absolute;left:50%;top:50%;margin:-40px 0 0 -40px}.ui-loading-2 > div{min-height:5px;background-color:#4285f4;width:0;position:absolute;z-index:1;animation:loadinganimation 5s infinite}.ui-loading-1 .ui-loading-text{position:absolute;width:250px;text-align:center;margin:90px 0 0 -125px;left:50%;font-size:12px;color:#000;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.ui-loading-2 .ui-loading-text{font-size:11px;padding:0 5px}.ui-loading-text i{margin-right:5px}.ui-dark .ui-loading{background-color:rgba(0,0,0,0.8)}.ui-dark .ui-loading > div{color:#FFF}@keyframes loadinganimation{0%{left:0}60%{left:0;width:100%}70%{left:70%;width:30%}90%{left:100%;width:30%}100%{left:0;width:0}}

.ui-menu-area{position:absolute;left:0;right:0;bottom:0;top:0;z-index:100}.ui-menu{position:absolute;z-index:1;transform-origin:top left;padding:10px 0}.ui-menu-items{background-color:#FFF;padding:5px 0;border-radius:var(--radius);box-shadow:2px 5px 10px rgba(0,0,0,0.05);border:1px solid #E0E0E0;position:relative}.ui-menu-submenu{position:absolute;z-index:101;background-color:#FFF;padding:5px 0;border-radius:var(--radius);box-shadow:2px 5px 10px rgba(0,0,0,0.05);border:1px solid #E0E0E0}.ui-menu-visible{}.ui-menu ul{margin:0;padding:0}.ui-menu li{margin:0;padding:5px;list-style-type:none;font-size:12px;cursor:pointer}.ui-menu-name{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:15px}.ui-menu-note{font-size:10px;margin:0 10px 3px 35px;color:#A0A0A0;line-height:11px}.ui-menu-nofa .ui-menu-note{margin-left:0}.ui-menu-selected{background-color:#F5F5F5}.ui-menu li:hover{background-color:#F0F0F0}.ui-menu-nofa{padding-left:12px !important}.ui-menu .pull-right{margin:1px 5px 0 0;width:20px;text-align:right;font-size:10px}.ui-menu-name i{width:30px;margin:0 5px 0 0;text-align:center;color:#000}.ui-menu-name b{position:absolute;right:10px;font-size:11px;color:gray;margin:1px 5px 0}.ui-menu-divider{padding:0 !important;background:transparent !important;cursor:default !important;color:gray;font-size:11px !important}.ui-menu-divider span{display:block;margin:5px 12px}.ui-menu-divider hr{margin:5px 0;border-color:#E0E0E0}.ui-menu li.ui-menu-disabled{color:#a0a0a0;background-color:#FFF;cursor:not-allowed}.ui-menu li.ui-menu-disabled i{color:#c5c5c5}.ui-menu-style-2 .ui-menu-items{border-radius:var(--radius)}.ui-menu-style-2 li{margin:2px 10px;padding:7px 2px;border-radius:var(--radius);font-size:13px}.ui-menu-style-2 .pull-right{margin-top:3px}.ui-menu-style-2 .ui-menu-submenu{border-radius:var(--radius)}.ui-menu-style-2 .ui-menu-divider{margin:7px 0}.ui-menu-style-2 .ui-menu-divider span{padding-left:10px}.ui-dark .ui-menu b{color:#505050}.ui-dark .ui-menu-items,.ui-dark .ui-menu-submenu{background-color:#303030;border-color:#353535;box-shadow:1px 5px 10px rgba(0,0,0,0.2)}.ui-dark .ui-menu-name i{color:#FFF}.ui-dark .ui-menu-selected{background-color:#252525}.ui-dark .ui-menu li:hover{background-color:#202020}.ui-dark .ui-menu-divider hr{border-color:#404040}.ui-dark .ui-menu-note{color:#777}.ui-dark .ui-menu li.ui-menu-disabled{background-color:#303030;color:#656565}.ui-dark .ui-menu li.ui-menu-disabled i{color:#525252}.ui-large .ui-menu-divider{font-size:14px !important}.ui-large .ui-menu li{font-size:14px;padding:7px 15px}.ui-large.ui-menu li{font-size:14px;padding:7px 15px}.ui-large .ui-menu-note{font-size:13px}@media (max-width:600px){.ui-menu-mobile.ui-menu-style-1 .ui-menu-divider{margin:7px 0;font-size:13px !important}.ui-menu-mobile.ui-menu-style-1 li{margin:0;padding:5px 8px;list-style-type:none;font-size:15px;cursor:pointer}.ui-menu-mobile.ui-menu-style-2 li{margin:2px 10px;padding:6px 5px;border-radius:var(--radius);font-size:15px}.ui-menu-mobile.ui-menu-style-2 .ui-menu-divider{margin:7px 0;font-size:13px !important}.ui-menu-mobile.ui-menu-style-2 .ui-menu-divider span{padding-left:12px}.ui-menu-mobile .ui-menu-note{font-size:12px}}

.ui-message{background-color:rgba(255,255,255,0.9);position:fixed;left:0;right:0;bottom:0;top:0;z-index:1010;width:100%;display:table;height:100%;transition:0.3s all;opacity:0}.ui-message > div{display:table-cell;vertical-align:middle;text-align:center;padding:15px}.ui-message-body{padding:30px 25px 20px;position:relative;display:inline-block;color:#000;border-radius:var(--radius);max-width:500px;text-align:left;transform:scale(1.5);transition:0.2s all;box-shadow:0 5px 20px rgba(0,0,0,0.1);background-color:#FFF;border-width:3px;border-style:solid}.ui-message-warning .ui-message-body{border-color:#DA4453;min-width:300px}.ui-message-success .ui-message-body{border-color:#8CC152;min-width:300px}.ui-message-info .ui-message-body{border-color:var(--color);min-width:300px}.ui-message button{display:block;min-width:100px;margin:20px auto 0;cursor:pointer;outline:0;background-color:#FFF;border:1px solid #E0E0E0;border-radius:var(--radius);color:#000;padding:0 20px;height:34px;font-weight:bold}.ui-message button:hover{background-color:#F0F0F0}.ui-message button:active{border-color:#D0D0D0}.ui-message-icon{border-radius:100px;width:60px;height:60px;padding:0;line-height:54px;font-size:30px;text-align:center;position:absolute;left:50%;border:4px solid #3BAFDA;margin-left:-30px;z-index:5;background-color:#FFF;color:#3BAFDA;margin-top:-40px;transform:scale(2);transition:all 0.3s}.ui-message-icon-animate{transform:scale(1)}.ui-message-success .ui-message-icon{border-color:#8CC152;color:#8CC152}.ui-message-warning .ui-message-icon{border-color:#DA4453;color:#DA4453}.ui-message-info .ui-message-icon{border-color:var(--color);color:var(--color)}.ui-message-error i{margin-right:5px;color:red}.ui-message-visible{opacity:1}.ui-message-visible .ui-message-body{transform:scale(1)}.ui-message2{background-color:rgba(220,220,220,0.9)}.ui-message2 .ui-message-body{padding:110px 0 0;border-width:0;border-radius:var(--radius);max-width:400px}.ui-message2 .ui-message-text{padding:0 20px 30px;text-align:center}.ui-message2 hr{display:none}.ui-message2 button{width:100%;border:0 !important;color:#FFF;border-radius:0 0 var(--radius) var(--radius);height:40px;margin:0}.ui-message2 button:hover{opacity:0.9}.ui-message2.ui-message-success button{background-color:#8CC152}.ui-message2.ui-message-warning button{background-color:#DA4453}.ui-message2.ui-message-info button{background-color:var(--color)}.ui-message2 .ui-message-icon{margin-top:30px;border-radius:0;border:0;background:transparent !important;font-size:50px}.ui-dark .ui-message2,.ui-dark .ui-message{background-color:rgba(50,50,50,0.9)}.ui-dark .ui-message-body{background-color:#202020;color:#FFF}.ui-dark .ui-message button{background-color:#404040;border-color:#404040;color:#FFF}.ui-dark .ui-message button:hover{background-color:#444}.ui-dark .ui-message button:active{border-color:#505050}.ui-dark .ui-message2.ui-message-success button{background-color:#8CC152}.ui-dark .ui-message2.ui-message-warning button{background-color:#DA4453}.ui-dark .ui-message2.ui-message-info button{background-color:var(--color)}.ui-dark .ui-message-icon{background-color:#202020}.ui-dark .ui-message hr{border-color:#404040}

.ui-notify-container{position:fixed;max-width:400px;z-index:100;text-align:center;width:100%}.ui-notify{height:80px;transition:0.15s transform,opacity;transform:scale(1);transition-timing-function:ease-in;opacity:1}.ui-notify figure{background-color:#FFF;box-shadow:0 3px 20px rgba(0,0,0,0.2);border-radius:var(--radius);font-size:14px;padding:0;color:#000;cursor:default;position:relative;height:60px;display:block}.ui-notify-dot{width:10px;height:10px;position:absolute;border-radius:var(--radius) var(--radius) var(--radius) var(--radius);right:5px;bottom:5px}.ui-notify-1 .ui-notify-dot{background-color:#8CC152}.ui-notify-2 .ui-notify-dot{background-color:#F43D35}.ui-notify-3 .ui-notify-dot{background-color:var(--color)}.ui-notify-1 .ui-notify-icon{color:#8CC152}.ui-notify-2 .ui-notify-icon{color:#F43D35}.ui-notify-3 .ui-notify-icon{color:var(--color)}.ui-notify-icon{float:left;font-size:25px;padding:0 0 0 10px;width:50px;text-align:center;height:60px;line-height:60px;border-radius:var(--radius) 0 0 var(--radius)}.ui-notify-message{margin:1px 0 0 60px;line-height:16px;height:60px;display:table-cell;width:100%;vertical-align:middle;padding:0 10px;text-align:left;word-break:break-all}.ui-notify-hidden{transform:scale(0.7);opacity:0.1}.ui-notify-container-top{left:50%;margin-left:-200px;top:20px}.ui-notify-container-top-left{left:25px;top:20px}.ui-notify-container-top-right{right:25px;top:20px}.ui-notify-container-bottom{bottom:10px;left:50%;margin-left:-150px}.ui-notify-container-bottom-left{bottom:10px;left:25px}.ui-notify-container-bottom-right{bottom:10px;right:25px}@media(max-width:767px){.ui-notify-container{left:20px;right:20px;margin-left:0;width:auto}}.ui-dark .ui-notify figure{background-color:#444;box-shadow:0 3px 20px rgba(0,0,0,0.3);color:#FFF}

.page{position:absolute;z-index:10;background-color:#FFF}

.ui-radiobutton{color:#000;font-size:12px}.ui-radiobutton div[data-value]{cursor:pointer;margin:0 10px 10px 0;line-height:16px;position:relative;display:inline-block}.ui-radiobutton span{vertical-align:middle}.ui-radiobutton-block div[data-value]{margin-bottom:4px;display:block}.ui-radiobutton i{width:14px;height:14px;display:inline-block;position:relative;border-radius:100px;border:1px solid #A0A0A0;margin-right:5px;vertical-align:middle}.ui-radiobutton-selected i{border-color:#000}.ui-radiobutton-selected i:before{content:' ';width:8px;height:8px;background-color:var(--color);display:block;position:absolute;border-radius:100px;margin:2px 0 0 2px}.ui-radiobutton-label{margin-bottom:5px;font-size:12px;text-align:left}.ui-radiobutton-label-required:before{color:red;content:'***';margin-right:5px}.ui-radiobutton.ui-disabled div[data-value]{cursor:not-allowed !important;color:gray}.ui-radiobutton.ui-disabled .ui-radiobutton-selected{color:gray !important}.ui-radiobutton.ui-disabled div[data-value] i{border-color:gray}.ui-radiobutton.ui-disabled div[data-value] i:before{background-color:gray}.ui-dark .ui-radiobutton i{border-color:#404040;background-color:#252525}.ui-dark .ui-radiobutton{color:inherit}.ui-dark .ui-radiobutton-selected i{border-color:#FFF}.ui-dark .ui-radiobutton-selected i:before{background-color:var(--color)}.ui-dark .ui-radiobutton.ui-disabled div[data-value]{cursor:not-allowed !important;color:#606060 !important}.ui-dark .ui-radiobutton.ui-disabled div[data-value] i{border-color:#404040}.ui-dark .ui-radiobutton.ui-disabled div[data-value] i:before{background-color:#505050}.ui-dark .ui-radiobutton.ui-disabled .ui-radiobutton-selected{color:#505050 !important}

.ui-searchinput{height:30px;border:1px solid #E0E0E0}.ui-searchinput-left > span{float:left}.ui-searchinput-left > div{margin-left:28px}.ui-searchinput-right > span{float:right}.ui-searchinput-right > div{margin-right:28px;padding-left:5px}.ui-searchinput input{border:0;width:100%;background-color:transparent;outline:0;margin:0;padding:0;height:28px;font-size:12px}.ui-searchinput span{width:28px;text-align:center;font-size:12px;line-height:29px;color:gray}.ui-searchinput-is span{cursor:pointer;color:red}.ui-dark .ui-searchinput{border-color:#404040}

.ui-spotlight-layer{position:fixed;width:100%;height:100%;left:0;top:0;overflow:hidden;z-index:101;background-color:rgba(200,200,200,0.8);transition:0.25s transform cubic-bezier(0.23,1,0.32,1);transform:scale(0.8)}.ui-spotlight{position:absolute;top:8%;z-index:20;box-shadow:0 1px 20px rgba(0,0,0,0.05);transform:translate(0px,20px);background-color:#FFF;border-radius:var(--radius);overflow:hidden}.ui-spotlight-search{height:60px;background:#FFF;border-radius:var(--radius) var(--radius) 0 0;border-bottom:1px solid #E0E0E0}.ui-spotlight-search input{width:100%;background-color:#FFF;border:0;font-size:20px;outline:0}.ui-spotlight-search > div{margin-left:42px;padding:15px 10px 0 0}.ui-spotlight-search > span{float:left;width:32px;text-align:right;padding:17px 0 0;font-size:18px}.ui-spotlight .selected{background-color:#F8F8F8}.ui-spotlight-visible{opacity:1;transform:scale(1)}.ui-spotlight img{vertical-align:middle}.ui-spotlight-container{max-height:200px;overflow-x:hidden;overflow-y:auto;overflow-scrolling:touch;width:}.ui-spotlight figure{border-bottom:1px solid #E5E5E5;font-size:14px;padding:0 10px 0;background-color:#FFF;cursor:pointer;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:40px;margin:0;display:block;line-height:39px}.ui-spotlight figure i{width:15px;text-align:center;margin-right:7px}.ui-spotlight figure:hover{background-color:#F8F8F8}.ui-spotlight-noscroll{overflow:hidden !important}.ui-dark .ui-spotlight-layer{background-color:rgba(0,0,0,0.8)}.ui-dark .ui-spotlight{background-color:#404040}.ui-dark .ui-spotlight-search{background:#202020;border-bottom-color:#404040}.ui-dark .ui-spotlight-search input{background-color:#202020}.ui-dark .ui-spotlight .selected{background-color:#303030;color:#FFF !important}.ui-dark .ui-spotlight figure{border-bottom-color:#404040;background-color:#202020}.ui-dark .ui-spotlight figure:hover{background-color:#282828}

.ui-tabmenu{padding:0;margin:0 0 10px;display:block;position:relative;font-size:12px;list-style-type:none;height:26px}.tabmenu{padding:0;margin:0 0 10px;display:block;position:relative;font-size:12px;list-style-type:none;height:26px}.ui-tabmenu li{float:left;line-height:26px;border:0;margin:0 1px 0 0;padding:0;background-color:#F0F0F0;text-align:center;color:gray;cursor:pointer;min-width:80px}.ui-tabmenu li:first-child{border-top-left-radius:var(--radius);border-bottom-left-radius:var(--radius)}.ui-tabmenu li:last-child{border-top-right-radius:var(--radius);border-bottom-right-radius:var(--radius)}.ui-tabmenu .selected{background-color:var(--color);color:#FFF}.ui-tabmenu i{margin-right:5px}.ui-tabmenu.ui-disabled .selected{background-color:#E0E0E0}.ui-tabmenu.ui-disabled li{cursor:not-allowed;color:#A0A0A0}.ui-dark .ui-tabmenu li{background-color:#303030;color:#A0A0A0}.ui-dark .ui-tabmenu .selected{background-color:var(--color);color:#FFF}.ui-dark .ui-tabmenu.ui-disabled .selected{background-color:#404040}.ui-dark .ui-tabmenu.ui-disabled li{color:#888}

.ui-textboxlist-label{margin-bottom:3px;font-size:12px;text-align:left}.ui-textboxlist-label-required:before{color:red;content:'***';margin-right:5px}.ui-textboxlist-label i{margin-right:5px}.ui-textboxlist-items > div:first-child{border-radius:var(--radius) var(--radius) 0 0}.ui-textboxlist-item{height:36px;background-color:#FFF;border:1px solid #E0E0E0;border-bottom:0}.ui-textboxlist-item > div:first-child{float:right;width:36px;text-align:center;color:#555;font-size:14px;height:35px;border-left:1px solid #E0E0E0}.ui-textboxlist-remove{color:#DA4453}.ui-textboxlist-item > div:last-child{padding:4px 0 0;margin-right:36px}.ui-textboxlist-item i{cursor:pointer;display:block;line-height:35px;text-align:center;float:left;width:36px;border-left:1px solid #E0E0E0;transform:scale(1)}.ui-textboxlist-up, .ui-textboxlist-down{font-weight:bold}.ui-textboxlist-item i:first-child{border-left:0}.ui-textboxlist-item i:active{margin-top:1px}.ui-textboxlist-item input{width:100%;background-color:transparent;border:0;padding:1px 10px 0;border-radius:var(--radius);outline:0;font-size:13px;color:#000;line-height:26px}.ui-textboxlist-base{border-radius:0 0 var(--radius) var(--radius);border-bottom:1px solid #E0E0E0}.ui-textboxlist-base > div:first-child{display:none}.ui-textboxlist-helper{margin-top:8px;font-size:11px;color:red !important;text-align:left}.ui-textboxlist-empty .ui-textboxlist-base{border-radius:var(--radius)}.ui-textboxlist-item-invalid input{color:red}.ui-textboxlist-movable .ui-textboxlist-item > div:last-child{margin-right:110px}.ui-textboxlist-movable .ui-textboxlist-item > div:first-child{width:110px}.ui-dark .ui-textboxlist-item{border-color:#404040}.ui-dark .ui-textboxlist-item{background-color:#202020;border-color:#404040}.ui-dark .ui-textboxlist-item > div:first-child{color:#999;border-left-color:#404040}.ui-dark .ui-textboxlist-item input{background-color:transparent;color:#FFF}.ui-dark .ui-textboxlist-base{border-bottom-color:#404040}.ui-dark .ui-textboxlist-helper{color:red !important}.ui-dark .ui-textboxlist-item i{border-left-color:#404040}

.ui-viewbox{overflow:hidden;-ms-overflow-style:none;box-sizing:content-box}.ui-viewbox-disabled{z-index:5;position:absolute;background-color:rgba(255,255,255,0.8)}.ui-viewbox-hidden{visibility:hidden}.ui-viewbox-centered-table{display:table;width:100%;height:100%}.ui-viewbox-centered-cell{display:table-cell;width:100%;height:100%;vertical-align:middle;text-align:center}`);

COMPONENT('approve','cancel:Cancel',function(self,config,cls){var cls2='.'+cls,events={},buttons,oldcancel;self.readonly();self.singleton();self.nocompile&&self.nocompile();self.make=function(){self.aclass(cls+' hidden');self.html('<div><div class="{0}-body"><span class="{0}-close"><i class="ti ti-times"></i></span><div class="{0}-content"></div><div class="{0}-buttons"><button data-index="0"></button><button data-index="1"></button></div></div></div>'.format(cls));buttons=self.find(cls2+'-buttons').find('button');self.event('click','button',function(){self.hide(+$(this).attrd('index'))});self.event('click',cls2+'-close',function(){self.callback=null;self.hide(-1)});self.event('click',function(e){var t=e.target.tagName;if(t!=='DIV')return;var el=self.find(cls2+'-body');el.aclass(cls+'-click');setTimeout(function(){el.rclass(cls+'-click')},300)})};events.keydown=function(e){var index=e.which===13?0:e.which===27?1:null;if(index!=null){self.find('button[data-index="{0}"]'.format(index)).trigger('click');e.preventDefault();e.stopPropagation();events.unbind()}};events.bind=function(){$(W).on('keydown',events.keydown)};events.unbind=function(){$(W).off('keydown',events.keydown)};self.show=function(message,a,b,fn){clearTimeout2(self.id);if(typeof(b)==='function'){fn=b;b=config.cancel}if(M.scope)self.currscope=M.scope();self.callback=fn;var icon=a.match(/["\:][a-z0-9-\s]+["\:]/);if(icon){var tmp=icon+'';if(tmp.indexOf(' ')==-1)tmp='ti ti-'+tmp;a=a.replace(icon,'').trim();icon='<i class="{0}"></i>'.format(tmp.replace(/"|\:/g,''))}else icon='';var color=a.match(/#[0-9a-f]+/i);if(color)a=a.replace(color,'').trim();buttons.eq(0).css('background-color',color||'').html(icon+a);if(oldcancel!==b){oldcancel=b;buttons.eq(1).html(b)}self.find(cls2+'-content').html(message.replace(/\n/g,'<br />'));$('html').aclass(cls+'-noscroll');self.rclass('hidden');events.bind();self.aclass(cls+'-visible',5);document.activeElement&&document.activeElement.blur()};self.hide=function(index){if(!index){self.currscope&&M.scope(self.currscope);self.callback&&self.callback(index)}self.rclass(cls+'-visible');events.unbind();setTimeout2(self.id,function(){$('html').rclass(cls+'-noscroll');self.aclass('hidden')},50)}});

COMPONENT('backtotop','icon:ti ti-arrow-circle-up',function(self,config,cls){var visible=false,timeout=null,$W;self.singleton();self.nocompile&&self.nocompile();self.onscroll=function(){timeout=null;var position=$W.scrollTop();if(position>WH){if(visible)return;visible=true}else{if(!visible)return;visible=false}self.tclass('active',visible)};self.make=function(){self.aclass(cls);self.html('<span><i class="{0}"></i></span>'.format(self.faicon(config.icon)));self.event('click',function(){document.body.scrollTop=0;document.documentElement.scrollTop=0});$W=$(W);$W.on('scroll',function(){timeout&&clearTimeout(timeout);timeout=setTimeout(self.onscroll,200)})}});

COMPONENT('box','zindex:12;padding:25;scrollbar:1;scrolltop:1;style:1;align:center;background:1;transparent:0',function(self,config,cls){var cls2='.'+cls,csspos={},nav=false,init=false;if(!W.$$box){W.$$box_level=W.$$box_level||1;W.$$box=true;$(document).on('click',cls2+'-button-close',function(){SET($(this).attrd('path'),'')});var resize=function(){setTimeout2(self.name,function(){for(var i=0;i<M.components.length;i++){var com=M.components[i];if(com.name==='box'&&!HIDDEN(com.dom)&&com.$ready&&!com.$removed)com.resize()}},200)};ON('resize2',resize);$(document).on('click',cls2+'-container',function(e){if(e.target===this){var com=$(this).component();if(com&&com.config.closeoutside){com.set('');return}}var el=$(e.target);if(el.hclass(cls+'-container')&&el.hclass(cls+'-style-1')){var form=el.find(cls2);var c=cls+'-animate-click';form.aclass(c);setTimeout(function(){form.rclass(c)},300)}})}self.readonly();self.submit=function(){if(config.submit)self.EXEC(config.submit,self.hide,self.element);else self.hide()};self.cancel=function(){if(config.cancel)self.EXEC(config.cancel,self.hide);else self.hide()};self.hide=function(){config.close&&self.EXEC(config.close);if(config.independent)self.hideforce();self.set('')};self.resize=function(){if(self.hclass('hidden'))return;var padding=WIDTH()==='xs'?0:config.padding;var ui=self.find(cls2);csspos.height=WH-(config.style==1?(padding*2):padding);csspos.top=config.style===3?0:padding;var w=config.width;if(w>WW){csspos.width='';csspos.maxwidth='';w=0}else{csspos.width=w+'px';csspos.maxwidth=w+'px'}ui.css(csspos);self.element.css('padding','0 '+padding+'px');var el=self.find(cls2+'-title');var th=el.height();csspos={height:csspos.height-th};if(w)csspos.width=w;if(nav)csspos.height-=nav.height()+5;self.find(cls2+'-body').css(csspos);self.scrollbar&&self.scrollbar.resize();self.element.SETTER('*','resize')};self.make=function(){var html='<div id="{0}" class="hidden {4}-container invisible{6}"><div class="{4}{5}"{1}><div class="{4}-title"><button name="cancel" class="{4}-button-close{3}" data-path="{2}"><i class="ti ti-times"></i></button><i class="{4}-icon hidden"></i><span class="{4}-label"></span></div><div class="{4}-body"></div></div>'.format(self.ID,config.width?(' style="max-width:'+config.width+'px"'):'',self.path,config.closebutton==false?' hidden':'',cls,config.align==='center'?'':(' '+cls+'-align-'+config.align),' '+cls+'-'+(config.background?'':'no')+'bg');$(document.body).append(html);var scr=self.find('> script');self.template=scr.length?scr.html().trim():'';scr.length&&scr.remove();var el=$('#'+self.ID);var body=el.find(cls2+'-body')[0];var counter=0;el.css('padding','0 '+config.padding+'px');while(self.dom.children.length){var child=self.dom.children[0];if(child.tagName==='NAV'){nav=$(child);if(counter){body.parentNode.appendChild(child)}else{el.find(cls2+'-title')[0].appendChild(child);nav=null}}else body.appendChild(child);counter++}self.rclass('hidden invisible');var csscls=self.attr('class');csscls&&el.aclass(csscls);self.replace(el,true);if(config.scrollbar)self.scrollbar=SCROLLBAR(self.find(cls2+'-body'),{shadow:config.scrollbarshadow,visibleY:config.visibleY,orientation:'y'});self.aclass(cls+'-style-'+config.style);if(config.transparent)self.aclass(cls+'-transparent');self.event('scroll',function(){EMIT('scroll',self.name);EMIT('reflow',self.name)});self.event('click','button[name]',function(){var t=this;switch(t.name){case'submit':self.submit(self.hide);break;case'cancel':!t.disabled&&self[t.name](self.hide);break}});config.enter&&self.event('keydown','input',function(e){e.which===13&&!self.find('button[name="submit"]')[0].disabled&&setTimeout2(self.ID+'enter',self.submit,500)})};self.configure=function(key,value,init,prev){switch(key){case'title':self.find(cls2+'-label').text(value);break;case'icon':var icon=self.find(cls2+'-icon');icon.rclass2('fa ti');if(value)icon.aclass(self.faicon(value)).rclass('hidden');else icon.aclass('hidden');break;case'background':!init&&self.tclass(cls+'-bg',!!value);break;case'algin':!init&&self.rclass2(cls+'-align').aclass(cls+'–align-'+value);break;case'width':if(!init&&value!==prev){self.find(cls2).css('max-width',value+'px');self.resize()}break;case'closebutton':!init&&self.find(cls2+'-button-close').tclass('hidden',value!==true);break}};self.esc=function(bind){if(bind){if(!self.$esc){self.$esc=true;$(W).on('keydown',self.esc_keydown)}}else{if(self.$esc){self.$esc=false;$(W).off('keydown',self.esc_keydown)}}};self.esc_keydown=function(e){if(e.which===27&&!e.isPropagationStopped()){var val=self.get();if(!val||config.if===val){e.preventDefault();e.stopPropagation();self.hide()}}};self.hideforce=function(){if(!self.hclass('hidden')){config.hide&&self.SEEX(config.hide);self.aclass('hidden');self.release(true);self.esc(false);self.find(cls2).rclass(cls+'-animate');W.$$box_level--}};var allowscrollbars=function(){$('html').tclass(cls+'-noscroll',!!$(cls2+'-container').not('.hidden').length)};self.setter=function(value){setTimeout2(self.name+'-noscroll',allowscrollbars,50);var isHidden=value!==config.if;if(self.hclass('hidden')===isHidden){if(!isHidden){config.reload&&self.EXEC(config.reload,self);config.default&&DEFAULT(self.makepath(config.default),true);config.scrolltop&&self.scrollbar&&self.scrollbar.scrollTop(0)}return}setTimeout2(cls,function(){EMIT('reflow',self.name)},10);if(isHidden){if(!config.independent)self.hideforce();return}if(self.template){var is=self.template.COMPILABLE();self.find(cls2).append(self.template);self.template=null;is&&COMPILE()}if(W.$$box_level<1)W.$$box_level=1;W.$$box_level++;self.css('z-index',W.$$box_level*config.zindex);self.aclass('invisible');self.rclass('hidden');self.release(false);self.find(cls2).css({'max-width':value+'px',width:''});config.scrolltop&&self.scrollbar&&self.scrollbar.scrollTop(0);config.reload&&self.EXEC(config.reload,self);config.default&&DEFAULT(self.makepath(config.default),true);self.resize();setTimeout(function(){self.rclass('invisible');self.find(cls2).aclass(cls+'-animate');if(!init&&isMOBILE){$('body').aclass('hidden');setTimeout(function(){$('body').rclass('hidden')},50)}config.autofocus&&self.autofocus(config.autofocus);init=true},200);setTimeout2(self.ID,function(){self.css('z-index',(W.$$box_level*config.zindex)+1)},500);config.closeesc&&self.esc(true)}});

COMPONENT('centered','closebutton:1;closeesc:1;scrollbar:1;visibleY:0',function(self,config,cls){var cls2='.'+cls,events={},container,scroller;events.bind=function(){if(!events.is){events.is=true;$(W).on('keydown',events.keydown)}};events.keydown=function(e){if(e.which===27)self.set('')};events.unbind=function(){if(events.is){events.is=false;$(W).off('keydown',events.keydown)}};self.resize=function(){setTimeout2(self.ID,self.resizeforce,300)};self.resizeforce=function(){var css={width:WW,height:WH};self.css(css);$(scroller).css(css);$(container).css({height:WH});self.scrollbar&&self.scrollbar.resize()};self.readonly();self.make=function(){self.aclass(cls+'-container hidden invisible');self.event('click','[data-name="close"],[name="close"]',function(){self.hide()});if(self.dom.children[0].nodeName===('SCRI'+'PT')){var html=self.dom.children[0].innerHTML;self.makeforce=function(){self.html('<span class="ti ti-times {0}-button{2}" data-name="close"></span><div class="{0}-content"><div class="{0}-body">{1}</div></div>'.format(cls,html,config.closebutton?'':' hidden'));if(html.COMPILABLE())COMPILE();self.makeforce=null}}else{container=document.createElement('DIV');container.setAttribute('class',cls+'-content');var div=document.createElement('DIV');div.setAttribute('class',cls+'-body');for(var i=0;i<self.dom.children.length;i++)div.appendChild(self.dom.children[i]);container.appendChild(div);scroller=document.createElement('DIV');scroller.appendChild(container);if(config.scrollbar)self.scrollbar=SCROLLBAR($(scroller),{visibleY:config.visibleY});self.dom.appendChild(scroller);self.element.prepend('<span class="ti ti-times {0}-button{1}" data-name="close"></span>'.format(cls,config.closebutton?'':' hidden'))}config.closeoutside&&self.find(cls2+'-body'+(typeof(config.closeoutside)==='string'?(','+config.closeoutside):'')).on('mousedown touchstart',function(e){if(e.target===this)self.hide()});self.on('resize2',self.resize)};self.hide=function(){self.set('')};self.setter=function(value){var is=value===config.if,hs=self.hclass('hidden');if(is===hs){if(is){self.makeforce&&self.makeforce();config.closeesc&&events.bind();config.default&&DEFAULT(self.makepath(config.default),true);config.reload&&self.EXEC(config.reload,self);config.zindex&&self.css('z-index',config.zindex);config.autofocus&&self.autofocus(config.autofocus)}else config.closeesc&&events.unbind();self.tclass('hidden',!is);if(is){self.resizeforce();self.rclass('invisible')}else if(config.close)self.EXEC(config.close);$('html').tclass(cls+'-noscroll',is)}}});

COMPONENT('checkboxlist','checkicon:check',function(self,config,cls){var cls2='.'+cls;!W.$checkboxlist&&(W.$checkboxlist=Tangular.compile('<div{{ if $.class}} class="{{ $.class}}"{{ fi}}><div class="'+cls+'-item" data-index="{{ index}}"><div><i class="ti ti-{{ $.checkicon}}"></i></div><span>{{ text}}</span></div></div>'));var template=W.$checkboxlist,container,data,datasource,content,dataold,render=null;self.nocompile&&self.nocompile();self.validate=function(value){return config.disabled||!config.required?true:!!(value&&value.length>0)};self.configure=function(key,value,init){if(init)return;var redraw=false;switch(key){case'type':self.type=value;break;case'checkicon':self.find('i').rclass().aclass((value.indexOf(' ')===-1?'ti ti-':'')+value);break;case'disabled':self.tclass('ui-disabled',value);self.reset();break;case'datasource':self.datasource(value,self.bind);datasource&&self.refresh();datasource=value;break;case'icon':if(!self.find(cls2+'-label').find('i').rclass().aclass((value.indexOf(' ')===-1?'ti ti-':'')+value).length)redraw=true;break;case'required':self.tclass(cls+'-required',value);self.state(1,1);break;case'label':redraw=true;break;case'items':if(value instanceof Array){self.bind('',value);return}var items=[];value.split(',').forEach(function(item){item=item.trim().split('|');var val=(item[1]==null?item[0]:item[1]).trim();if(config.type==='number')val=+val;items.push({name:item[0].trim(),id:val})});self.bind('',items);self.refresh();break}redraw&&setTimeout2(self.id+'.redraw',function(){self.redraw();self.bind('',dataold);self.refresh()},100)};self.make=function(){self.aclass(cls);content=self.html();config.type&&(self.type=config.type);config.disabled&&self.aclass('ui-disabled');self.redraw();if(config.items)self.reconfigure({items:config.items});else if(config.datasource)self.reconfigure({datasource:config.datasource});else self.bind('',null);self.event('click',cls2+'-item',function(e){e.stopPropagation();if(config.disabled)return;var el=$(this);var is=!el.hasClass(cls+'-checked');var index=+el.attrd('index');var value=data[index];if(value==null)return;value=value.value;var arr=self.get();if(!(arr instanceof Array))arr=[];index=arr.indexOf(value);if(is){index===-1&&arr.push(value)}else{index!==-1&&arr.splice(index,1)}self.reset(true);self.set(arr,2);self.change()})};self.redraw=function(){var label=config.label||content,icon=config.icon?((config.icon.indexOf(' ')===-1?'ti ti-':'')+config.icon):'';self.tclass(cls+'-required',!!config.required);if(label)label='<div class="{0}-label">{1}{2}:</div>'.format(cls,icon?'<i class="{0}"></i>'.format(icon):'',label);self.html(label+'<div class="'+cls+'-container"></div>');container=self.find(cls2+'-container')};self.selectall=function(){if(config.disabled)return;var arr=[],inputs=self.find(cls2+'-item');var value=self.get();self.change(true);if(value&&inputs.length===value.length){self.set(arr);return}inputs.each(function(){var el=$(this);arr.push(self.parser(data[+el.attrd('index')].value))});self.set(arr)};self.bind=function(path,value){if(!value)return;var kv=config.value||'id',kt=config.text||'name';render='';data=[];dataold=value;for(var i=0,length=value.length;i<length;i++){var isString=typeof(value[i])==='string';var item={value:isString?value[i]:value[i][kv],text:isString?value[i]:value[i][kt],index:i};render+=template(item,config);data.push(item)}if(render)container.html(render);else container.html(config.empty);path&&setTimeout(function(){self.refresh()},200)};self.setter=function(value){container.find(cls2+'-item').each(function(){var el=$(this);var index=+el.attrd('index');var checked=false;if(!value||!value.length)checked=false;else if(data[index])checked=data[index];checked&&(checked=value.indexOf(checked.value)!==-1);el.tclass(cls+'-checked',checked)})};self.state=function(type){if(type){var invalid=config.required?self.isInvalid():false;if(invalid!==self.$oldstate){self.$oldstate=invalid;self.tclass(cls+'-invalid',invalid)}}}});

COMPONENT('clipboard',function(self,config,cls){var container;self.singleton();self.readonly();self.nocompile();self.make=function(){if(navigator.clipboard&&W.isSecureContext&&window.self===window.top){self.copy=function(value){navigator.clipboard.writeText(value).catch(err=>console.error(err))}}else{var id='clipboard'+self.id;$(document.body).append('<textarea id="{0}" class="{1}"></textarea>'.format(id,cls));container=$('#'+id);self.copy=function(value){container.val(value);container.focus();container.select();document.execCommand('copy');container.blur()}}};self.setter=function(value){value&&self.copy(value)}});

COMPONENT('cloudeditor','parent:auto;autosave:1;realtime:0;margin:0',function(self,config){var iframe,savetimeout,callbacks={},callbackid=1,skip=false,init=false,save=function(){savetimeout=null;send({TYPE:'body'},function(msg){skip=true;self.set(msg.value)})};var send=function(msg,callback){if(callback){var id=(callbackid++)+'';msg.callbackid=id;callbacks[id]=callback}msg.id=self.ID;iframe[0].contentWindow.postMessage(STRINGIFY(msg),'*')};var onmessage=function(e){if(e.originalEvent.source!==iframe[0].contentWindow)return;var msg=e.originalEvent?e.originalEvent.data:'';if(typeof(msg)==='string'){if(msg.indexOf('"totaleditor"')===-1||msg.indexOf('"id":"'+self.ID+'"')===-1)return;msg=PARSE(msg)}else if(!msg)return;if(msg.totaleditor!==1||msg.id!==self.ID)return;if(msg.callbackid){var fn=callbacks[msg.callbackid];if(fn){delete callbacks[msg.callbackid];fn(msg)}return}switch(msg.TYPE){case'click':case'shortcut':case'errors':case'change':config.event&&self.SEEX(config.event,msg.TYPE,msg.value);break;case'menu':case'contextmenu':var offset=self.element.offset();msg.x+=offset.left;msg.y+=offset.top;config.contextmenu&&self.SEEX(config.contextmenu,msg);break;case'cursor':config.event&&self.SEEX(config.event,msg.TYPE,msg.value);if(config.autosave){savetimeout&&clearTimeout(savetimeout);savetimeout=setTimeout(save,500)}break;case'init':init=true;break}};self.make=function(){var protocol=location.protocol;if(protocol==='file:')protocol='http:';self.append('<iframe src="{1}//cdn.componentator.com/editor/1.min.html?id={0}" frameborder="0" scrolling="no" allowtransparency="true" allow="geolocation *; microphone *; camera *; midi *; encrypted-media *" style="width:100%;overflow:hidden;display:block"></iframe>'.format(self.ID,protocol));iframe=self.find('iframe');self.resize();$(W).on('message',onmessage)};self.destroy=function(){$(W).off('message',onmessage)};self.replace=function(text,to){send({TYPE:'replace',value:text,to:to})};self.readonly=function(is){send({TYPE:'readonly',value:is})};self.search=function(text,callback){send({TYPE:'search',value:text},callback)};self.select=function(from,to){send({TYPE:'select',from:from,to:to})};self.goto=function(pos){send({TYPE:'goto',value:pos})};self.clear=function(){send({TYPE:'clear'})};self.replaceselections=function(val){send({TYPE:'replaceselections',value:val})};self.replaceselection=function(val){send({TYPE:'replaceselection',value:val})};self.replacerange=function(val,from,to){send({TYPE:'replacerange',value:val,from:from,to:to})};self.change=function(arr){send({TYPE:'change',value:arr})};self.focus=function(){iframe.focus();send({TYPE:'focus'})};self.command=function(value){send({TYPE:'command',value:value})};self.exec=function(a,b,c){send({TYPE:'exec',a:a,b:b,c:c})};self.insert=function(value){send({TYPE:'insert',value:value})};self.save=function(callback){send({TYPE:'body'},function(msg){send({TYPE:'clear'});if(callback){callback(msg.value)}else{skip=true;self.get().body=msg.value;self.update(true)}})};self.send=send;self.resize=function(){var parent=self.parent(config.parent);var w=parent.width();var h=parent.height()-config.margin;if(config.minheight&&h<config.minheight)h=config.minheight;iframe.css({width:w,height:h})};self.marker=function(name,from,to,color){send({TYPE:'marker',from:from,to:to,value:name,color:color})};self.darkmode=function(){send({TYPE:'darkmode',value:$('body').hclass('ui-dark')})};var settertimeout;self.setter=function(){if(skip){skip=false;return}if(init){settertimeout=null;var model=self.get();model&&send({TYPE:'init',linenumbers:model.linenumbers,realtime:config.realtime,readonly:config.readonly,mode:model.type||'clientside',value:model.body,keywords:model.keywords||config.keywords,darkmode:$('body').hclass('ui-dark')})}else{settertimeout&&clearTimeout(settertimeout);settertimeout=setTimeout(self.setter,100)}}});

COMPONENT('colorpicker',function(self,config,cls){var cls2='.'+cls,is=false,events={},colors=[['','E73323','EC8632','FFFD54','68B25B','7CFBFD','4285F4','E73CF7','E8357E','73197B','91683C','808080'],['FFFFFF','E8E8E8','D1D1D1','B9B9B9','A2A2A2','8B8B8B','747474','5D5D5D','464646','2E2E2E','171717','000000'],['5C0E07','5E350F','66651C','41641A','2D6419','2D6438','2D6465','133363','000662','2D0962','5C1262','5C0F32','8A1A11','8E501B','99982F','62962B','47962A','479654','479798','214D94','010E93','451393','8A2094','8A1C4C','B9261A','BD6B27','CCCB41','83C83C','61C83B','61C871','62C9CA','2E67C5','0216C4','5C1DC4','B92EC5','B92865','E73323','EC8632','FFFD54','A4FB4E','7BFA4C','7BFA8D','7CFBFD','3B80F7','041EF5','7327F5','E73CF7','E7357F','E8483F','EF9D4B','FFFE61','B4FB5C','83FA5A','83FAA2','83FBFD','5599F8','343CF5','8C42F6','E84FF7','E84A97','EA706B','F2B573','FFFE7E','C5FC7C','96FA7A','96FBB9','96FCFD','7BB2F9','666AF6','A76EF7','EB73F8','EA71B0','F6CECD','FAE6CF','FFFED1','EBFED1','D7FDD0','D7FDE7','D8FEFE','D1E5FD','CCCDFB','E1CEFB','F6CFFC','F6CEE4']];self.singleton();self.readonly();self.blind();self.nocompile();self.make=function(){var html='';for(var i=0;i<colors.length;i++){html+='<div>';for(var j=0;j<colors[i].length;j++){var color=colors[i][j];html+='<span class="{0}-cell" data-color="{2}"><span style="{1}">{3}</span></span>'.format(cls,color?('background-color:#'+color):'',color,color?'':'<i class="ti ti-ban"></i>')}html+='</div>'}self.html('<div class="{0}"><div class="{0}-body">{1}</div></div>'.format(cls,html));self.aclass(cls+'-container hidden');self.event('click',cls2+'-cell',function(){var el=$(this);var color=el.find('span').attr('style').replace('background-color:','');self.opt.callback&&self.opt.callback(color?self.opt.opacity?self.hex2rgba(color,self.opt.opacity):color:'');self.hide()});events.click=function(e){var el=e.target,parent=self.dom;do{if(el==parent)return;el=el.parentNode}while(el);self.hide()};self.on('scroll + reflow + resize + resize2',self.hide)};self.hex2rgba=function(hex,opacity){var c=(hex.charAt(0)==='#'?hex.substring(1):hex).split('');if(c.length===3)c=[c[0],c[0],c[1],c[1],c[2],c[2]];var a=c.splice(6);if(a.length)a=parseFloat(parseInt((parseInt(a.join(''),16)/255)*1000)/1000);else a=opacity||'1';c='0x'+c.join('');return'rgba('+[(c>>16)&255,(c>>8)&255,c&255].join(',')+','+a+')'};self.bindevents=function(){if(!events.is){events.is=true;$(document).on('click',events.click)}};self.unbindevents=function(){if(events.is){events.is=false;$(document).off('click',events.click)}};self.show=function(opt){var tmp=opt.element?opt.element instanceof jQuery?opt.element[0]:opt.element.element?opt.element.dom:opt.element:null;if(is&&tmp&&self.target===tmp){self.hide();return}events.is&&self.unbindevents();self.target=tmp;self.opt=opt;var css={};if(is){css.left=0;css.top=0;self.element.css(css)}else self.rclass('hidden');var target=$(opt.element);var w=self.element.width();var offset=target.offset();if(opt.element){switch(opt.align){case'center':css.left=Math.ceil((offset.left-w/2)+(target.innerWidth()/2));break;case'right':css.left=(offset.left-w)+target.innerWidth();break;default:css.left=offset.left;break}css.top=opt.position==='bottom'?(offset.top-self.element.height()-10):(offset.top+target.innerHeight()+10)}else{css.left=opt.x;css.top=opt.y}if(opt.offsetX)css.left+=opt.offsetX;if(opt.offsetY)css.top+=opt.offsetY;is=true;if(css.top+self.element.height()>window.innerHeight)css.top=window.innerHeight-self.element.height()-20;self.element.css(css);setTimeout(self.bindevents,10)};self.hide=function(){if(is){is=false;self.target=null;self.opt=null;setTimeout(self.unbindevents,50);self.aclass('hidden')}}});

COMPONENT('directory','minwidth:200;create:Create',function(self,config,cls){var cls2='.'+cls,container,timeout,icon,plus,skipreset=false,skipclear=false,ready=false,input=null,issearch=false,is=false,selectedindex=0,resultscount=0,templateE='{{ name | encode | ui_directory_helper}}',templateR='{{ name | raw}}',template='<li data-index="{{ $.index}}" data-search="{{ $.search}}" class="{{ $.classes}}">{{ if $.checkbox}}<span class="'+cls+'-checkbox"><i class="ti ti-check"></i></span>{{ fi}}{0}</li>',templateraw=template.format(templateR);var regstrip=/(&nbsp;|<([^>]+)>)/ig;var parentclass=null,parentclass2=null,skiphide=false,skipmouse=false,customvalue,search,main;template=template.format(templateE);Thelpers.ui_directory_helper=function(val){var t=this;return t.template?(typeof(t.template)==='string'?t.template.indexOf('{{')===-1?t.template:Tangular.render(t.template,this):t.render(this,val)):self.opt.render?self.opt.render(this,val):val};self.template=Tangular.compile(template);self.templateraw=Tangular.compile(templateraw);self.readonly();self.singleton();self.nocompile();self.configure=function(key,value,init){if(init)return;switch(key){case'placeholder':self.find('input').prop('placeholder',value);break}};self.make=function(){self.aclass('hidden '+cls+'-area');self.append('<div class="{1}"><div class="{1}-search"><span class="{1}-add hidden"><i class="ti ti-plus"></i></span><span class="{1}-button"><i class="ti ti-search"></i></span><div><input type="text" placeholder="{0}" class="{1}-search-input" name="dir{2}" autocomplete="new-password" /></div></div><div class="{1}-container"><ul></ul></div></div>'.format(config.placeholder,cls,Date.now()));customvalue=$('<li data-index="-2"></li>')[0];main=self.find(cls2);container=self.find('ul');input=self.find('input');icon=self.find(cls2+'-button').find('.ti');plus=self.find(cls2+'-add');search=self.find(cls2+'-search');self.event('mouseenter mouseleave','li',function(){if(ready&&!issearch&&!skipmouse){container.find('li.current').rclass('current');$(this).aclass('current');var arr=container.find('li:visible');for(var i=0;i<arr.length;i++){if($(arr[i]).hclass('current')){selectedindex=i;break}}}});self.element.on('click',function(e){if(e.target===self.dom)self.hide(1)});var skiphidedelay,skipmousedelay,skipmousefalse=function(){skipmousedelay=null;skipmouse=false};var skipmouseforce=function(){skipmouse=true;skipmousedelay&&clearTimeout(skipmousedelay);skipmousedelay=setTimeout(skipmousefalse,500)};self.event('focus','input',function(){skiphide=true;skiphidedelay&&clearTimeout(skiphidedelay);skiphidedelay=setTimeout(function(){skiphide=false},800);if(self.opt.search===false)$(this).blur()});self.event('click',cls2+'-button',function(e){skipclear=false;input.val('');self.search();e.stopPropagation();e.preventDefault()});self.event('click',cls2+'-add',function(){if(self.opt.custom&&self.opt.callback){self.opt.scope&&M.scope(self.opt.scope);self.opt.callback(input.val(),self.opt.element,true);self.hide()}});self.event('click','li',function(e){var el=$(this);if(el.hclass('ui-disabled'))return;if(self.opt.callback){self.opt.scope&&M.scope(self.opt.scope);var index=+el.attrd('index');if(index===-2){self.opt.scope&&M.scope(self.opt.scope);self.opt.callback(input.val(),self.opt.element,true);self.hide();return}var item=self.opt.items[index];if(self.opt.checkbox){item.selected=!item.selected;if(item.selected)item.selectedts=Date.now();else delete item.selectedts;el.tclass('selected',item.selected);if(self.opt.checked){var tmpindex=self.opt.checked.indexOf(item.id);if(item.selected){if(tmpindex===-1)self.opt.checked.push(item.id)}else if(tmpindex!==-1)self.opt.checked.splice(tmpindex,1)}var response=null;if(self.opt.checked){response=self.opt.checked.slice(0)}else{response=[];for(var i=0;i<self.opt.items.length;i++){var m=self.opt.items[i];if(m.selected)response.push(m)}}response.quicksort('selectedts');self.opt.callback(response,self.opt.element,false,e)}else self.opt.callback(item,self.opt.element,false,e)}is=true;if(!self.opt.checkbox){self.hide(0);e.preventDefault();e.stopPropagation()}});self.event('keydown','input',function(e){var o=false;switch(e.which){case 8:skipclear=false;break;case 27:o=true;self.hide();break;case 13:o=true;var sel=self.find('li.current');if(!sel.hclass('ui-disabled'))sel.trigger('click');break;case 38:o=true;selectedindex--;if(selectedindex<0)selectedindex=0;self.move();break;case 40:o=true;selectedindex++;if(selectedindex>=resultscount)selectedindex=resultscount;self.move();break}if(o){skipmouseforce();e.preventDefault();e.stopPropagation()}});self.event('input','input',function(){issearch=true;setTimeout2(self.ID,self.search,100,null,this.value)});var fn=function(){is&&!skiphide&&self.hide(1)};self.on('reflow + scroll + resize + resize2',fn);$(W).on('scroll',fn)};self.move=function(){var counter=0,scroller=container.parent();var li=container.find('li');var hli=0,was=false,last=-1,lastselected=0,plus=0;for(var i=0;i<li.length;i++){var el=$(li[i]);if(el.hclass('hidden')){el.rclass('current');continue}var is=selectedindex===counter;el.tclass('current',is);if(is){hli=(el.innerHeight()||30)+1;plus=(hli*2);was=true;var t=(hli*(counter||1));scroller[0].scrollTop=t-plus}counter++;last=i;lastselected++}if(!was&&last>=0){selectedindex=lastselected;li.eq(last).aclass('current')}};var nosearch=function(){issearch=false};self.nosearch=function(){setTimeout2(self.ID+'nosearch',nosearch,500)};self.search=function(value){if(!self.opt)return;icon.tclass('ti-times',!!value).tclass('ti-search',!value);if(self.opt.custom){plus.tclass('hidden',!value);customvalue.innerHTML=(typeof(self.opt.custom)==='string'?self.opt.custom:config.create)+': <b>'+(value?Thelpers.encode(value.toString()):'...')+'</b>'}if(!value&&!self.opt.ajax){if(!skipclear)container.find('li').rclass('hidden');if(!skipreset)selectedindex=0;resultscount=self.opt.items?self.opt.items.length:0;customvalue.classList.toggle('hidden',!value);self.move();self.nosearch();return}resultscount=0;selectedindex=0;if(self.opt.ajax){var val=value||'';if(self.ajaxold!==val){self.ajaxold=val;setTimeout2(self.ID,function(val){self.opt&&self.opt.ajax(val,function(items){var builder=[],indexer={},item,key=(self.opt.search==true?self.opt.key:(self.opt.search||self.opt.key))||'name';for(var i=0;i<items.length;i++){item=items[i];if(self.opt.exclude&&self.opt.exclude(item))continue;if(self.opt.checked)item.selected=self.opt.checked.indexOf(item.id)!==-1;indexer.index=i;indexer.search=item[key]?item[key].replace(regstrip,''):'';indexer.checkbox=self.opt.checkbox===true;resultscount++;builder.push(self.opt.ta(item,indexer))}if(self.opt.empty){item={};var tmp=self.opt.raw?'<b>{0}</b>'.format(self.opt.empty):self.opt.empty;item[self.opt.key||'name']=tmp;if(!self.opt.raw)item.template='<b>{0}</b>'.format(self.opt.empty);indexer.index=-1;builder.unshift(self.opt.ta(item,indexer))}if(customvalue.parentNode)customvalue.parentNode.removeChild(customvalue);skipclear=true;self.opt.items=items;container.html(builder);if(self.opt.custom){container.prepend(customvalue);customvalue.classList.toggle('hidden',!value)}self.move();self.nosearch()})},300,null,val)}}else if(value){value=value.toSearch().split(' ');var arr=container.find('li');for(var i=0;i<arr.length;i++){var el=$(arr[i]);var val=el.attrd('search')||'';if(!val)continue;val=val.toSearch();var is=false;for(var j=0;j<value.length;j++){if(val.indexOf(value[j])===-1){is=true;break}}el.tclass('hidden',is);if(!is)resultscount++}customvalue.classList.toggle('hidden',!value);skipclear=true;self.move();self.nosearch()}};self.show=function(opt){if(opt.checked==true)opt.checked=[];var el=opt.element instanceof jQuery?opt.element[0]:opt.element;if(opt.items==null)opt.items=EMPTYARRAY;self.tclass(cls+'-default',!opt.render);if(opt.classname){main.aclass(opt.classname);parentclass=opt.classname}if(opt.class){main.aclass(opt.class);parentclass2=opt.class}if(!opt.minwidth)opt.minwidth=config.minwidth;if(is){clearTimeout(timeout);if(self.target===el){self.hide(1);return}}self.initializing=true;self.target=el;opt.ajax=null;self.ajaxold=null;var element=opt.element?$(opt.element):null;var callback=opt.callback,items=opt.items,type=typeof(items);var item;if(type==='string'){items=opt.items=GET(items);type=typeof(items)}if(type==='function'&&callback){type='';opt.ajax=items;items=null}if(!items&&!opt.ajax){self.hide(0);return}self.tclass(cls+'-search-hidden',opt.search===false);self.opt=opt;opt.class&&main.aclass(opt.class);skiphide=true;input.val('');var builder=[],selected=null;opt.ta=opt.key?Tangular.compile((opt.raw?templateraw:template).replace(/\{\{\sname/g,'{{ '+opt.key)):opt.raw?self.templateraw:self.template;if(!opt.ajax){var indexer={},key=(opt.search==true?opt.key:(opt.search||opt.key))||'name';for(var i=0;i<items.length;i++){item=items[i];if(typeof(item)==='string')item={name:item,id:item,selected:item===opt.selected};if(opt.exclude&&opt.exclude(item))continue;if(item.selected||opt.selected===item){selected=i;skipreset=true;item.selected=true}else item.selected=false;if(opt.checked&&item.selected)opt.checked.push(item.id);var c='';if(item.selected)c+=(c?' ':'selected current');if(item.classname)c+=(c?' ':item.classname);if(item.disabled)c+=(c?' ':'ui-disabled');indexer.classes=c;indexer.checkbox=opt.checkbox===true;indexer.index=i;indexer.search=item[key]?item[key].replace(regstrip,''):'';builder.push(opt.ta(item,indexer))}if(opt.empty){item={};var tmp=opt.raw?'<b>{0}</b>'.format(opt.empty):opt.empty;item[opt.key||'name']=tmp;if(!opt.raw)item.template='<b>{0}</b>'.format(opt.empty);indexer.index=-1;builder.unshift(opt.ta(item,indexer))}}self.target=element?element[0]:null;var w=element?element.width():config.minwidth;var offset=element?element.offset():EMPTYOBJECT;var width=w+(opt.offsetWidth||0);if(opt.minwidth&&width<opt.minwidth)width=opt.minwidth;else if(opt.maxwidth&&width>opt.maxwidth)width=opt.maxwidth;ready=false;opt.ajaxold=null;plus.aclass('hidden');self.find('input').prop('placeholder',opt.placeholder||config.placeholder);var scroller=self.find(cls2+'-container').css('width',width+30);if(customvalue.parentNode)customvalue.parentNode.removeChild(customvalue);container.html(builder);if(opt.custom)container.prepend(customvalue);var options={left:0,top:0,width:width},height=opt.height||scroller.height();scroller.css('height',opt.height||'');if(opt.element){switch(opt.align){case'center':options.left=Math.ceil((offset.left-width/2)+(opt.element.innerWidth()/2));break;case'right':options.left=(offset.left-width)+opt.element.innerWidth();break;default:options.left=offset.left;break}options.top=opt.position==='bottom'?((offset.top-height)+element.height()):offset.top}else{options.top=opt.y;options.left=opt.x}options.scope=M.scope?M.scope():'';if(opt.offsetX)options.left+=opt.offsetX;if(opt.offsetY)options.top+=opt.offsetY;var mw=width,mh=scroller.height();if(options.left<0)options.left=10;else if((mw+options.left)>WW)options.left=(WW-mw)-10;mh+=search.height();if((mh+options.top)>WH)options.top=(WH-mh)-10;if(options.top<10)options.top=10;main.css(options);!isMOBILE&&setTimeout(function(){if(opt.search!==false)input.focus()},200);setTimeout(function(){self.initializing=false;skiphide=false;is=true;if(selected){var h=container.find('li:first-child').innerHeight()+1;var y=(container.find('li.selected').index()*h)-(h*2);scroller[0].scrollTop=y<0?0:y}else scroller[0].scrollTop=0;ready=true;self.rclass('invisible')},100);if(is){self.search();return}selectedindex=selected||0;resultscount=items?items.length:0;skipclear=true;self.search();self.aclass('invisible');self.rclass('hidden');setTimeout(function(){if(self.opt&&((self.opt.x!=null&&self.opt.y!=null)||(self.target&&self.target.offsetParent)))main.aclass(cls+'-visible');else self.hide(1)},100);skipreset=false};self.hide=function(sleep){if(!is||self.initializing)return;clearTimeout(timeout);timeout=setTimeout(function(){self.rclass(cls+'-visible').aclass('hidden');if(parentclass){main.rclass(parentclass);parentclass=null}if(parentclass2){main.rclass(parentclass2);parentclass2=null}if(self.opt){self.opt.close&&self.opt.close();self.opt=null}is=false},sleep?sleep:100)}});

COMPONENT('errorhandler','keywords:401=login',function(self,config){self.readonly();self.singleton();self.nocompile();self.blind();self.make=function(){var keywords=config.keywords?config.keywords.split(','):EMPTYARRAY;for(var i=0;i<keywords.length;i++)keywords[i]=keywords[i].split('=');self.on('ERROR',function(err){if(err instanceof Error)err=[{error:err.message}];else if(!(err instanceof Array))err=[{error:err.error||err.message||err.err}];var arr=[],response={};for(var m of err){if(!m.error)continue;for(var k of keywords){if((m.name&&m.name.indexOf(k[0])!==-1)||m.error.indexOf(k[0])!==-1)response[k[1]]=true}arr.push(m.error.toString().encode())}response.items=arr;if(config.exec){response.message=arr.join('<br />');self.SEEX(config.exec,response)}else{var name=self.caniuse('message')?'message':self.caniuse('notify')?'notify':self.caniuse('notifybar')?'notifybar':self.caniuse('snackbar')?'snackbar':'';if(name)SETTER(name+'/warning',response.items.join('<br />'));else if(W.console)console.error('ERROR():',response.items.join('<br />'))}SETTER('!loading/hide',100)})}});

COMPONENT('exec',function(self,config){var regparent=/\?\d/,extensions=[],skiptimeout;self.readonly();self.blind();self.singleton();self.register=function(fn){extensions.push(fn)};self.make=function(){var scope=null,scopepath=function(el,val){if(!scope)scope=el.scope();return val==null?scope:scope?scope.makepath?scope.makepath(val):val.replace(/\?/g,el.scope().path):val};var fn=function(plus,forceprevent){return function execlick(e){var el=$(this);if(!plus&&skiptimeout)return;if(!e.$force&&!plus&&el.hclass('exec2')){skiptimeout&&clearTimeout(skiptimeout);skiptimeout=setTimeout(function(ctx,e){skiptimeout=null;e.$force=true;execlick.call(ctx,e)},300,this,e);return}var attr=el.attrd('exec'+plus);var path=el.attrd('path'+plus);var href=el.attrd('href'+plus);var def=el.attrd('def'+plus);var reset=el.attrd('reset'+plus);if(skiptimeout){clearTimeout(skiptimeout);skiptimeout=null}scope=null;var prevent=forceprevent?'1':el.attrd('prevent'+plus);if(prevent==='true'||prevent==='1'){e.preventDefault();e.stopPropagation()}if(attr){if(extensions.length){for(var ext of extensions){if(ext(attr,el,e,plus))return}}if(attr.charAt(0)==='@'){attr=attr.substring(1);var com=el.component();if(com&&typeof(com[attr])==='function')com[attr](el,e);return}if(attr.indexOf('?')!==-1){var tmp=scopepath(el);if(tmp){var isparent=regparent.test(attr);attr=tmp.makepath?tmp.makepath(attr):attr.replace(/\?/g,tmp.path);if(isparent&&attr.indexOf('/')!==-1)M.scope(attr.split('/')[0]);else M.scope(tmp.path)}if(scope&&scope.plugin){var index=attr.indexOf('/');if(index!==-1){var method=attr.substring(index+1).trim();if(method){var fn=scope.plugin[method];if(fn)fn.call(scope.plugin,el,e);else WARN('The method "{0}" not found'.format(attr));return}}}}EXEC(attr,el,e)}href&&REDIRECT(href);if(def){if(def.indexOf('?')!==-1)def=scopepath(el,def);DEFAULT(def)}if(reset){if(reset.indexOf('?')!==-1)reset=scopepath(el,reset);RESET(reset)}if(path){var val=el.attrd('value');if(val){if(path.indexOf('?')!==-1)path=scopepath(el,path);var v=GET(path);SET(path,new Function('value','return '+val)(v),true)}}}};var el=$(document.body);el.on('contextmenu',config.selector3||'.exec3',fn('3',true));el.on('dblclick',config.selector2||'.exec2',fn('2'));el.on('click',config.selector||'.exec',fn(''))}});

COMPONENT('filebrowser',function(self){var input;self.singleton();self.readonly();self.nocompile();self.open=self.show=self.browse=function(opt,callback){if(!opt.callback&&callback)opt.callback=callback;self.opt=opt;self.find('input').attr('accept',opt.accept||'*/*').prop('multiple',!!opt.multiple);input[0].value='';input.click()};self.make=function(){self.aclass('hidden');self.append('<input type="file" multiple />');input=self.find('input');self.event('change','input',function(e){self.opt.callback(e.target.files,e);this.value=''})}});

COMPONENT('form','zindex:12;scrollbar:1',function(self,config,cls){var cls2='.'+cls,container,csspos={};if(!W.$$form){W.$$form_level=W.$$form_level||1;W.$$form=true;$(document).on('click',cls2+'-button-close',function(){SET($(this).attrd('path'),'')});var resize=function(){setTimeout2('form',function(){for(var i=0;i<M.components.length;i++){var com=M.components[i];if(com.name==='form'&&!HIDDEN(com.dom)&&com.$ready&&!com.$removed)com.resize()}},200)};ON('resize2',resize);$(document).on('click',cls2+'-container',function(e){var el=$(e.target);if(e.target===this||el.hclass(cls+'-container-padding')){var com=$(this).component();if(com&&com.config.closeoutside){com.set('');return}}if(!(el.hclass(cls+'-container-padding')||el.hclass(cls+'-container')))return;var form=$(this).find(cls2);var c=cls+'-animate-click';form.aclass(c);setTimeout(function(){form.rclass(c)},300)})}self.readonly();self.submit=function(){if(config.submit)self.EXEC(config.submit,self.hide,self.element);else self.hide()};self.cancel=function(){if(config.cancel)self.EXEC(config.cancel,self.hide);else self.hide()};self.hide=function(){config.close&&self.EXEC(config.close);if(config.independent)self.hideforce();self.set('')};self.resize=function(){if(self.scrollbar){container.css('height',WH);self.scrollbar.resize()}if(!config.center||self.hclass('hidden'))return;var ui=self.find(cls2);var fh=ui.innerHeight();var wh=WH,r=(wh/2)-(fh/2);csspos.marginTop=(r>30?(r-15):20)+'px';ui.css(csspos)};self.make=function(){$(document.body).append('<div id="{0}" class="hidden {4}-container invisible"><div class="{4}-scrollbar"><div class="{4}-container-padding"><div class="{4}" style="max-width:{1}px"><div class="{4}-title"><button name="cancel" class="{4}-button-close{3}" data-path="{2}"><i class="ti ti-times"></i></button><i class="{4}-icon hidden"></i><span></span></div></div></div></div>'.format(self.ID,config.width||800,self.path,config.closebutton==false?' hidden':'',cls));var scr=self.find('> script');self.template=scr.length?scr.html().trim():'';if(scr.length)scr.remove();var el=$('#'+self.ID);var body=el.find(cls2)[0];container=el.find(cls2+'-scrollbar');if(config.scrollbar){el.css('overflow','hidden');self.scrollbar=SCROLLBAR(el.find(cls2+'-scrollbar'),{visibleY:1,orientation:'y'})}while(self.dom.children.length)body.appendChild(self.dom.children[0]);self.rclass('hidden invisible');var csscls=self.attr('class');csscls&&el.aclass(csscls);self.replace(el,true);self.event('scroll',function(){EMIT('scroll',self.name);EMIT('reflow',self.name)});self.event('click','button[name]',function(){var t=this;switch(t.name){case'submit':self.submit(self.hide);break;case'cancel':!t.disabled&&self[t.name](self.hide);break}});config.enter&&self.event('keydown','input',function(e){e.which===13&&!self.find('button[name="submit"]')[0].disabled&&setTimeout2(self.ID+'enter',self.submit,500)})};self.configure=function(key,value,init,prev){switch(key){case'title':self.find(cls2+'-title > span').text(value);break;case'icon':var icon=self.find(cls2+'-icon');icon.rclass2('fa ti');if(value)icon.aclass(self.faicon(value)).rclass('hidden');else icon.aclass('hidden');break;case'width':!init&&value!==prev&&self.find(cls2).css('max-width',value+'px');break;case'closebutton':!init&&self.find(cls2+'-button-close').tclass('hidden',value!==true);break}};self.esc=function(bind){if(bind){if(!self.$esc){self.$esc=true;$(W).on('keydown',self.esc_keydown)}}else{if(self.$esc){self.$esc=false;$(W).off('keydown',self.esc_keydown)}}};self.esc_keydown=function(e){if(e.which===27&&!e.isPropagationStopped()){var val=self.get();if(!val||config.if===val){e.preventDefault();e.stopPropagation();self.hide()}}};self.hideforce=function(){if(!self.hclass('hidden')){config.hide&&self.SEEX(config.hide);self.aclass('hidden');self.release(true);self.esc(false);self.find(cls2).rclass(cls+'-animate');W.$$form_level--}};var allowscrollbars=function(){$('html').tclass(cls+'-noscroll',!!$(cls2+'-container').not('.hidden').length)};self.setter=function(value){setTimeout2(self.name+'-noscroll',allowscrollbars,50);var isHidden=value!==config.if;if(self.hclass('hidden')===isHidden){if(!isHidden){config.reload&&self.EXEC(config.reload,self);config.default&&DEFAULT(self.makepath(config.default),true)}return}setTimeout2(cls,function(){EMIT('reflow',self.name)},10);if(isHidden){if(!config.independent)self.hideforce();return}if(self.template){var is=self.template.COMPILABLE();self.find(cls2).append(self.template);self.template=null;is&&COMPILE()}if(W.$$form_level<1)W.$$form_level=1;W.$$form_level++;self.css('z-index',W.$$form_level*config.zindex);self.aclass('invisible');self.rclass('hidden');self.resize();self.release(false);if(self.scrollbar)self.scrollbar.scrollTop(0);else self.element.scrollTop(0);config.reload&&self.EXEC(config.reload,self);config.default&&DEFAULT(self.makepath(config.default),true);setTimeout(function(){self.rclass('invisible');if(self.scrollbar)self.scrollbar.scrollTop(0);else self.element.scrollTop(0);self.find(cls2).aclass(cls+'-animate');config.autofocus&&self.autofocus(config.autofocus)},200);setTimeout2(self.ID,function(){self.css('z-index',(W.$$form_level*config.zindex)+1)},500);config.closeesc&&self.esc(true)}});

COMPONENT('icons','search:Search;scrollbarshadow:0',function(self,config,cls){var cls2='.'+cls,template='<span data-search="{0}"><i class="{1}"></i></span>',events={},container,content,is=false,cachekey;self.singleton();self.readonly();self.blind();self.nocompile();self.redraw=function(){container.html('<div class="{0}"><div class="{0}-header"><div class="{0}-search"><span><i class="ti ti-search clearsearch"></i></span><div><input type="text" placeholder="{1}" class="{0}-search-input"></div></div></div><div class="{0}-scrollbar"><div class="{0}-content"></div></div></div>'.format(cls,config.search));content=container.find(cls2+'-content');self.scrollbar=SCROLLBAR(container.find(cls2+'-scrollbar'),{visibleY:1,shadow:config.scrollbarshadow})};self.rendericons=function(empty){var key=empty?'1':'0';if(cachekey===key)return;cachekey=key;var builder=[];empty&&builder.push(template.format('',''));AJAX('GET '+(config.list||'https://cdn.componentator.com/icons-db.html'),function(response){response=response.split(',');for(var icon of response)builder.push(template.format(icon.toSearch(),'ti ti-'+icon));if(config.custom){AJAX('GET '+config.custom,function(response){response=response.split(',');for(var icon of response)builder.push(template.format(icon.toSearch(),'tic ti-'+icon));container.find(cls2+'-content').html(builder.join(''))})}else container.find(cls2+'-content').html(builder.join(''))})};self.search=function(value){var search=container.find('.clearsearch');search.rclass2('ti-');if(!value.length){search.aclass('ti-search');content.find('.hidden').rclass('hidden');return}value=value.toSearch();search.aclass('ti-times');self.scrollbar.scrollTop(0);var icons=content.find('span');for(var i=0;i<icons.length;i++){var el=$(icons[i]);el.tclass('hidden',el.attrd('search').indexOf(value)===-1)}};self.make=function(){self.aclass(cls+'-area hidden');self.append('<div class="{0}-container"></div>'.format(cls));container=self.find(cls2+'-container');self.event('keydown','input',function(){var t=this;setTimeout2(self.ID,function(){self.search(t.value)},300)});self.element.on('click',function(e){if(e.target===self.dom)self.hide()});self.event('click','.ti-times',function(){self.find('input').val('');self.search('')});self.event('click',cls2+'-content span',function(){self.opt.scope&&M.scope(self.opt.scope);self.opt.callback&&self.opt.callback($(this).find('i').attr('class'));self.hide()});events.click=function(e){var el=e.target,parent=self.dom;do{if(el==parent)return;el=el.parentNode}while(el);self.hide()};self.on('reflow + resize + resize2',self.hide);self.on('scroll',function(e){if(e&&e[0]!==self.scrollbar.area[0])self.hide()});self.redraw()};self.bindevents=function(){if(!events.is){events.is=true;$(document).on('click',events.click)}};self.unbindevents=function(){if(events.is){events.is=false;$(document).off('click',events.click)}};self.show=function(opt){var tmp=opt.element?opt.element instanceof jQuery?opt.element[0]:opt.element.element?opt.element.dom:opt.element:null;if(is&&tmp&&self.target===tmp){self.hide();return}var search=container.find(cls2+'-search-input');search.val('');container.find('.clearsearch').rclass2('ti-').aclass('ti-search');if(M.scope)opt.scope=M.scope();self.target=tmp;self.opt=opt;var css={};if(is){css.left=0;css.top=0;container.css(css)}else self.rclass('hidden');var target=$(opt.element);var w=container.width();var offset=target.offset();if(opt.element){switch(opt.align){case'center':css.left=Math.ceil((offset.left-w/2)+(target.innerWidth()/2));break;case'right':css.left=(offset.left-w)+target.innerWidth();break;default:css.left=offset.left;break}css.top=opt.position==='bottom'?(offset.top-self.element.height()-10):(offset.top+target.innerHeight()+10)}else{css.left=opt.x;css.top=opt.y}if(opt.offsetX)css.left+=opt.offsetX;if(opt.offsetY)css.top+=opt.offsetY;is=true;self.rendericons(opt.empty);container.css(css);if(opt.scrolltop==null||opt.scrolltop)self.scrollbar.scrollTop(0);search.focus();setTimeout(self.bindevents,50);clearTimeout2(self.ID)};self.clear=function(){content.empty();cachekey=null};self.hide=function(){is=false;self.target=null;self.opt=null;self.unbindevents();self.aclass('hidden');content.find('.hidden').rclass('hidden');setTimeout2(self.ID,self.clear,1000*10)}});

COMPONENT('importer',function(self,config){var init=false,clid=null,pending=false,skip=false,content='',singletonkey,replace=function(value){return self.scope?self.makepath(value):value.replace(/\?/g,config.path||config.if)};var replace2=function(value){return value?ADAPT(config.path||config.if,config.id,value):value};self.readonly();self.make=function(){if(config.singleton){if(!W.$importercache)W.$importercache={};singletonkey=HASH(config.path+'|'+config.id+'|'+config.url).toString(36);if(W.$importercache[singletonkey]){skip=true;setTimeout(()=>self.remove(),10);return}}var scr=self.find('script');content=scr.length?scr.html():''};self.reload=function(recompile){if(config.singleton)W.$importercache[singletonkey]=1;config.reload&&EXEC(replace(config.reload));recompile&&COMPILE();setTimeout(function(){pending=false;init=true},1000)};self.setter=function(value){if(pending||skip)return;if(config.if!==value){if(config.cleaner&&init&&!clid)clid=setTimeout(self.clean,config.cleaner*60000);return}pending=true;if(clid){clearTimeout(clid);clid=null}if(init){self.reload();return}if(content){self.html(replace2(content));setTimeout(self.reload,50,true)}else self.import(config.url,self.reload,true,replace2)};self.clean=function(){config.clean&&EXEC(replace(config.clean));setTimeout(function(){self.empty();init=false;clid=null},1000)}});

COMPONENT('input','maxlength:200;innerlabel:0;tabindex:0;dirkey:name;dirvalue:id;increment:1;format:auto;autovalue:name;direxclude:false;checkicon:ti ti-check;forcevalidation:1;searchalign:1;height:80;tabs:1;after:\\:',function(self,config,cls){var cls2='.'+cls,input,placeholder,dirsource,binded,customvalidator,mask,rawvalue,isdirvisible=false,nobindcamouflage=false,focused=false;self.nocompile();self.init=function(){Thelpers.ui_input_icon=function(val){return val.charAt(0)==='!'||val.indexOf(' ')!==-1?('<span class="ui-input-icon-custom">'+(val.charAt(0)==='!'?val.substring(1):('<i class="'+val)+'"></i>')+'</span>'):('<i class="ti ti-'+val+'"></i>')};W.ui_input_template=Tangular.compile(('{{ if label}}<div class="{0}-label">{{ if icon}}<i class="{{ icon}}"></i>{{ fi}}{{ label | raw}}{{ after | raw}}</div>{{ fi}}<div class="{0}-control{{ if licon}} {0}-licon{{ fi}}{{ if ricon || (type === \'number\' && increment) }} {0}-ricon{{ fi}}">{{ if ricon || (type === \'number\' && increment) }}<div class="{0}-icon-right{{ if type === \'number\' && increment && !ricon}} {0}-increment{{ else if riconclick || type === \'date\' || type === \'time\' || (type === \'search\' && searchalign === 1) || type === \'password\' }} {0}-click{{ fi}}">{{ if type === \'number\' && !ricon}}<i class="ti ti-caret-up"></i><i class="ti ti-caret-down"></i>{{ else}}{{ ricon | ui_input_icon}}{{ fi}}</div>{{ fi}}{{ if licon}}<div class="{0}-icon-left{{ if liconclick || (type === \'search\' && searchalign !== 1) }} {0}-click{{ fi}}">{{ licon | ui_input_icon}}</div>{{ fi}}<div class="{0}-input{{ if align === 1 || align === \'center\' }} center{{ else if align === 2 || align === \'right\' }} right{{ fi}}">{{ if placeholder}}<div class="{0}-placeholder">{{ placeholder}}</div>{{ fi}}{{ if dirsource || type === \'icon\' || type === \'emoji\' || type === \'color\' }}<div class="{0}-value" tabindex="{{ tabindex}}"></div>{{ else}}{{ if type === \'multiline\' }}<textarea data-jc-bind="" style="height:{{ height}}px" tabindex="{{ tabindex}}"></textarea>{{ else}}<input type="{{ if type === \'password\' }}password{{ else}}text{{ fi}}" tabindex="{{ tabindex}}" {{ if autofill}} autocomplete="on" name="{{ NAME}}"{{ else}} name="input'+Date.now()+'" autocomplete="new-password"{{ fi}} data-jc-bind=""{{ if maxlength > 0}} maxlength="{{ maxlength}}"{{ fi}}{{ if autofocus}} autofocus{{ fi}} />{{ fi}}{{ fi}}</div></div>{{ if error}}<div class="{0}-error hidden"><i class="ti ti-warning"></i> {{ error}}</div>{{ fi}}').format(cls))};var dirsourceprepare=function(arr){if(!config.dirfilter)return arr;var fn=FN(config.dirfilter);var output=[];for(var m of arr){if(fn(m))output.push(m)}return output};var dirsourceread=function(){var arr=GET(self.makepath(config.dirsource));return dirsourceprepare(arr)};self.make=function(){if(config.innerlabel&&config.after)config.after='';if(!config.label)config.label=self.html();if(isMOBILE&&config.autofocus)config.autofocus=false;if(config.placeholder==0)config.placeholder='0';if(config.autofill){if(typeof(config.autofill)==='string'){config.NAME=config.autofill}else{var index=self.path.lastIndexOf('.');config.NAME=index===-1?self.path:self.path.substring(index+1)}}self.aclass(cls+' invisible');self.rclass('invisible',100);self.redraw();self.event('input change',function(){if(nobindcamouflage)nobindcamouflage=false;else self.check()});self.event('click',cls2+'-checkbox',function(){if(config.disabled){$(this).blur();return}self.change(true);var val=self.get();if(val===1)val=0;else if(val===0)val=1;else if(val===true)val=false;else val=true;self.set(val,2)});self.event('focus','input,textarea,'+cls2+'-value',function(){if(config.disabled){$(this).blur();return}focused=true;self.camouflage(false);self.aclass(cls+'-focused');config.autocomplete&&self.EXEC(config.autocomplete,self,input.parent());if(config.autosource){var opt={};opt.element=self.element;opt.search=GET(self.makepath(config.autosource));opt.callback=function(value){var val=typeof(value)==='string'?value:value[config.autovalue];if(config.autoexec){self.EXEC(config.autoexec,value,function(val){self.set(val,2);self.change();self.bindvalue()})}else{self.set(val,2);self.change();self.bindvalue()}};SETTER('autocomplete','show',opt)}else if(config.mask){setTimeout(function(input){input.selectionStart=input.selectionEnd=0},50,this)}else if(config.dirsource&&(config.autofocus!=false&&config.autofocus!=0)){if(!isdirvisible)self.find(cls2+'-control').trigger('click')}else if(config.type==='date'||config.type==='time'){setTimeout(function(){self.element.find(cls2+'-icon-right').trigger('click')},300)}});self.event('paste','input,textarea',function(e){if(config.mask){var val=(e.originalEvent.clipboardData||window.clipboardData).getData('text');self.set(val.replace(/\s|\t/g,''));e.preventDefault()}self.check()});self.event('keydown','input,textarea',function(e){var t=this,code=e.which;if(t.readOnly||config.readonly||config.disabled){if(e.keyCode!==9){if(config.dirsource){self.find(cls2+'-control').trigger('click');return}e.preventDefault();e.stopPropagation()}return}if(config.tabs&&t.tagName==='TEXTAREA'&&e.keyCode===9){t.setRangeText('\t',t.selectionStart,t.selectionEnd,'end');self.check();e.preventDefault();return}if(!config.disabled&&config.dirsource&&(code===13||code>30)){self.find(cls2+'-control').trigger('click');return}if(config.mask){if(e.metaKey){if(code===8||code===127){e.preventDefault();e.stopPropagation()}return}if(code===32){e.preventDefault();e.stopPropagation();return}var beg=e.target.selectionStart,end=e.target.selectionEnd,val=t.value,c;if(code===8||code===127){if(beg===end){c=config.mask.substring(beg-1,beg);t.value=val.substring(0,beg-1)+c+val.substring(beg);self.curpos(beg-1)}else{for(var i=beg;i<=end;i++){c=config.mask.substring(i-1,i);val=val.substring(0,i-1)+c+val.substring(i)}t.value=val;self.curpos(beg)}e.preventDefault();return}if(code>40){var cur=String.fromCharCode(code);if(mask&&mask[beg]){if(!mask[beg].test(cur)){e.preventDefault();return}}c=config.mask.charCodeAt(beg);if(c!==95){beg++;while(true){c=config.mask.charCodeAt(beg);if(c===95||isNaN(c))break;else beg++}}if(c===95){val=val.substring(0,beg)+cur+val.substring(beg+1);t.value=val;beg++;while(beg<config.mask.length){c=config.mask.charCodeAt(beg);if(c===95)break;else beg++}self.curpos(beg)}else self.curpos(beg+1);e.preventDefault();e.stopPropagation()}}});self.event('blur','input,textarea,'+cls2+'-value',function(){focused=false;self.camouflage(true);self.rclass(cls+'-focused')});self.event('click',cls2+'-control',function(){if(config.disabled||isdirvisible)return;if(config.type==='icon'){opt={};opt.element=self.element;opt.value=self.get();opt.empty=true;opt.callback=function(val){self.change(true);self.set(val,2);self.check();rawvalue[0].focus()};SETTER((self.caniuse('icons')?'icons':'faicons')+'/show',opt);return}else if(config.type==='color'){opt={};opt.element=self.element;opt.value=self.get();opt.empty=true;opt.callback=function(al){self.change(true);self.set(al,2);self.check();rawvalue[0].focus()};SETTER('colorpicker/show',opt);return}else if(config.type==='emoji'){opt={};opt.element=self.element;opt.value=self.get();opt.empty=true;opt.callback=function(al){self.change(true);self.set(al,2);self.check();rawvalue[0].focus()};SETTER('emoji/show',opt);return}if(!config.dirsource)return;isdirvisible=true;setTimeout(function(){isdirvisible=false},500);var opt={};opt.element=self.find(cls2+'-control');opt.items=dirsource||dirsourceread();opt.offsetY=-1+(config.diroffsety||0);opt.offsetX=0+(config.diroffsetx||0);opt.placeholder=config.dirplaceholder;opt.render=config.dirrender?GET(self.makepath(config.dirrender)):null;opt.custom=!!config.dircustom;opt.offsetWidth=2;opt.minwidth=config.dirminwidth||200;opt.maxwidth=config.dirmaxwidth;opt.key=config.dirkey||config.key;opt.empty=config.dirempty;opt.checkbox=!!config.multiple;var val=self.get();if(config.multiple){for(var i=0;i<opt.items.length;i++){var item=opt.items[i];if(val instanceof Array){item.selectedts=val.indexOf(item[config.dirvalue||config.value]);item.selected=item.selectedts!==-1}else item.selected=false}}else opt.selected=val;if(config.dirraw)opt.raw=true;if(config.dirsearch!=null)opt.search=config.dirsearch;if(dirsource&&config.direxclude==false&&!config.multiple){for(var i=0;i<dirsource.length;i++){var item=dirsource[i];if(item)item.selected=typeof(item)==='object'&&item[config.dirvalue]===val}}else if(config.direxclude)opt.exclude=item=>item?item[config.dirvalue]===val:false;opt.callback=function(item,el,custom){if(item==null||(config.multiple&&!item.length)){rawvalue.html('');self.set(config.multiple?[]:null,2);self.change();self.check();return}if(config.multiple){var arr=[];for(var i=0;i<item.length;i++){var m=item[i];arr.push(m[config.dirvalue||config.value])}self.set(arr,2);self.change(true);return}var val=custom||typeof(item)==='string'?item:item[config.dirvalue||config.value];if(custom&&typeof(config.dircustom)==='string'){var fn=GET(self.makepath(config.dircustom));fn(val,function(val){self.set(val,2);self.change(true);self.bindvalue()})}else if(custom){if(val){self.set(val,2);self.change(true);if(dirsource)self.bindvalue();else input.val(val)}}else{self.set(val,2);self.change(true);if(dirsource)self.bindvalue();else input.val(val)}rawvalue[0].focus()};SETTER('directory/show',opt)});self.event('click',cls2+'-placeholder,'+cls2+'-label',function(e){if(!config.disabled){if(config.dirsource){e.preventDefault();e.stopPropagation();self.find(cls2+'-control').trigger('click')}else if(!config.camouflage||$(e.target).hclass(cls+'-placeholder')){if(input.length){input[0].focus()}else rawvalue[0].focus()}}});self.event('click',cls2+'-icon-left,'+cls2+'-icon-right',function(e){if(config.disabled)return;var el=$(this);var left=el.hclass(cls+'-icon-left');var opt;if(config.dirsource&&left&&config.liconclick){e.preventDefault();e.stopPropagation()}if(!left&&!config.riconclick){if(config.type==='date'){opt={};opt.element=self.element;opt.value=self.get();opt.callback=function(val){self.change(true);self.set(val)};SETTER('datepicker/show',opt)}else if(config.type==='time'){opt={};opt.element=self.element;opt.value=self.get();opt.callback=function(val){self.change(true);self.set(val)};SETTER('timepicker/show',opt)}else if(config.type==='search')self.set('');else if(config.type==='password')self.password();else if(config.type==='number'||config.type==='number2'){var tmp=$(e.target);if(tmp.attr('class').indexOf('ti-')!==-1){var n=tmp.hclass('ti-caret-up')?1:-1;self.change(true);var val=self.preparevalue((self.get()||0)+(config.increment*n));self.set(val,2)}}return}if(left&&config.liconclick)self.EXEC(config.liconclick,self,el);else if(config.riconclick)self.EXEC(config.riconclick,self,el);else if(left&&config.type==='search')self.set('')})};self.camouflage=function(is){if(config.camouflage){if(is){var t=input[0],arr=t.value.split('');for(var i=0;i<arr.length;i++)arr[i]=typeof(config.camouflage)==='string'?config.camouflage:'•';nobindcamouflage=true;t.value=arr.join('')}else{nobindcamouflage=true;var val=self.get();input[0].value=val==null?'':val}self.tclass(cls+'-camouflaged',is)}};self.curpos=function(pos){var el=input[0];if(el.createTextRange){var range=el.createTextRange();range.move('character',pos);range.select()}else if(el.selectionStart){el.focus();el.setSelectionRange(pos,pos)}};self.validate=function(value){if((!config.required||config.disabled)&&!self.forcedvalidation())return true;if(config.disabled)return true;if(config.dirsource)return!!value;if(customvalidator)return customvalidator(value);if(config.type==='date')return value instanceof Date&&!isNaN(value.getTime());if(config.type==='checkbox')return value===true||value===1;if(value==null)value='';else value=value.toString();if(config.mask&&typeof(value)==='string'&&value.indexOf('_')!==-1)return false;if(config.minlength&&value.length<config.minlength)return false;switch(config.type){case'email':return value.isEmail();case'phone':return value.isPhone();case'url':return value.isURL();case'zip':return(/^\d{5}(?:[-\s]\d{4})?$/).test(value);case'currency':case'number':case'number2':if(config.type==='number2'&&(value==null||value==''))return false;value=value.parseFloat();if((config.minvalue!=null&&value<config.minvalue)||(config.maxvalue!=null&&value>config.maxvalue))return false;return config.minvalue==null?value>0:true}return value.length>0};self.offset=function(){var offset=self.element.offset();var control=self.find(cls2+'-control');var width=control.width()+2;return{left:offset.left,top:control.offset().top+control.height(),width:width}};self.password=function(show){var visible=show==null?input.attr('type')==='text':show;input.attr('type',visible?'password':'text');self.find(cls2+'-icon-right').find('i').tclass(config.ricon,visible).tclass('ti-eye-slash',!visible).tclass('ti-eye',visible)};self.preparevalue=function(value){if(config.type==='number'&&(config.type!=='number2'||value)&&(config.minvalue!=null||config.maxvalue!=null)){var tmp=typeof(value)==='string'?+value.replace(',','.'):value;if(isNaN(tmp))tmp=0;if(config.minvalue>tmp)value=config.minvalue;if(config.maxvalue<tmp)value=config.maxvalue}return value};self.getterin=self.getter;self.getter=function(value,realtime,nobind){if(nobindcamouflage)return;if(config.mask&&config.masktidy){var val=[];for(var i=0;i<value.length;i++){if(config.mask.charAt(i)==='_')val.push(value.charAt(i))}value=val.join('')}self.getterin(self.preparevalue(value),realtime,nobind)};self.setterin=self.setter;self.setter=function(value,path,type){if(config.mask){if(value){if(config.masktidy){var index=0,val=[];for(var i=0;i<config.mask.length;i++){var c=config.mask.charAt(i);val.push(c==='_'?(value.charAt(index++)||'_'):c)}value=val.join('')}if(mask){var arr=[];for(var i=0;i<mask.length;i++){var c=value.charAt(i);if(mask[i]&&mask[i].test(c))arr.push(c);else arr.push(config.mask.charAt(i))}value=arr.join('')}}else value=config.mask}self.setterin(value,path,type);self.bindvalue();config.camouflage&&!focused&&setTimeout(self.camouflage,type==='show'?2000:1,true);if(config.type==='password')self.password(true)};self.check=function(){var is=false;if(config.dirsource)is=!!rawvalue.text();else is=input&&input.length?!!input[0].value:!!self.get();if(binded===is)return;binded=is;placeholder&&placeholder.tclass('hidden',is);self.tclass(cls+'-binded',is);if(config.type==='search')self.find(cls2+'-icon-'+(config.searchalign===1?'right':'left')).find('i').tclass(config.searchalign===1?config.ricon:config.licon,!is).tclass('ti-times',is)};self.bindvalue=function(){var value=self.get();if(dirsource){var item,text=[];for(var i=0;i<dirsource.length;i++){item=dirsource[i];if(typeof(item)==='string'){if(item===value)break;item=null}else if(config.multiple){var v=item[config.dirvalue||config.value],index=value instanceof Array?value.indexOf(v):-1;if(index!==-1)text.push({index:index,value:item[config.dirkey||config.key]})}else if(item[config.dirvalue||config.value]===value){item=item[config.dirkey||config.key];break}else item=null}if(config.multiple){text.quicksort('index');for(var i=0;i<text.length;i++)text[i]=text[i].value;item=text.join(', ')}else if(value&&item==null&&config.dircustom)item=value;if(config.dirraw)rawvalue.html(item||'');else rawvalue.text(item||'')}else if(config.dirsource){if(config.dirdetail){self.EXEC(config.dirdetail,value,function(val){if(config.dirraw)rawvalue.html(val||'');else rawvalue.text(val||'');self.check()});return}else if(config.dirraw)rawvalue.html(value||'');else rawvalue.text(value||'')}else{switch(config.type){case'color':rawvalue.css('background-color',value||'');break;case'icon':rawvalue.html('<i class="{0}"></i>'.format(value||''));break;case'emoji':rawvalue.html(value);break;case'checkbox':self.tclass(cls+'-checked',value===true||value===1);break}}self.check()};self.redraw=function(){if(!config.ricon){if(config.dirsource)config.ricon='angle-down';else if(config.type==='date'){config.ricon='calendar';if(!config.align&&!config.innerlabel)config.align=1}else if(config.type==='icon'||config.type==='color'||config.type==='emoji'){config.ricon='angle-down';if(!config.align&&!config.innerlabel)config.align=1}else if(config.type==='time'){config.ricon='clock';if(!config.align&&!config.innerlabel)config.align=1}else if(config.type==='search')if(config.searchalign===1)config.ricon='search';else config.licon='search';else if(config.type==='password')config.ricon='eye';else if(config.type==='number'||config.type==='number2'){if(!config.align&&!config.innerlabel)config.align=1}}self.tclass(cls+'-masked',!!config.mask);self.rclass2(cls+'-type-');if(config.type)self.aclass(cls+'-type-'+config.type);var html,is=false;if(config.type==='checkbox'){html='<div class="{0}-checkbox"><span><i class="{checkicon}"></i></span><label>{label}</label></div>'.format(cls).arg(config)}else{is=true;var opt=CLONE(config);if(opt.type==='number2')opt.type='number';html=W.ui_input_template(opt)}self.html(html);if(is){input=self.find('input,textarea');rawvalue=self.find(cls2+'-value');placeholder=self.find(cls2+'-placeholder')}else input=rawvalue=placeholder=null};self.configure=function(key,value){switch(key){case'icon':if(value&&value.indexOf(' ')===-1)config.icon='ti ti-'+value;break;case'dirsource':if(config.dirajax||value.indexOf('/')!==-1){dirsource=null;self.bindvalue()}else{if(value.indexOf(',')!==-1){dirsource=dirsourceprepare(self.parsesource(value));self.bindvalue()}else{self.datasource(value,function(path,value){dirsource=dirsourceprepare(value);self.bindvalue()})}}self.tclass(cls+'-dropdown',!!value);input.prop('readonly',!!config.disabled||!!config.dirsource);break;case'disabled':self.tclass('ui-disabled',!!value);input&&input.prop('readonly',!!value||!!config.dirsource);self.reset();break;case'required':self.tclass(cls+'-required',!!value);self.reset();break;case'type':self.type=value;break;case'validate':customvalidator=value?(/\(|=|>|<|\+|-|\)/).test(value)?FN('value=>'+value):(function(path){path=self.makepath(path);return function(value){return GET(path)(value)}})(value):null;break;case'innerlabel':self.tclass(cls+'-inner',!!value);self.tclass(cls+'-raw',!value);break;case'monospace':self.tclass(cls+'-monospace',!!value);break;case'maskregexp':if(value){mask=value.toLowerCase().split(',');for(var i=0;i<mask.length;i++){var m=mask[i];if(!m||m==='null')mask[i]='';else mask[i]=new RegExp(m)}}else mask=null;break;case'mask':config.mask=value.replace(/#/g,'_');break}};self.formatter(function(path,value){if(value){switch(config.type){case'id':return(value+'').toLowerCase().replace(/[^a-z0-9]/g,'');case'lower':return(value+'').toLowerCase();case'upper':return(value+'').toUpperCase();case'phone':return(value+'').replace(/\s/g,'');case'email':return(value+'').toLowerCase();case'date':var format=config.format;if(format==='auto')format='';return value.format(format||DEF.dateformat||'yyyy-MM-dd');case'time':var format=config.format;if(format==='auto')format='';return value.format(format||'HH:mm');case'number':return config.format?(config.format==='auto'?value.format():value.format(config.format)):value;case'number2':return value==null?'':config.format?(config.format==='auto'?value.format():value.format(config.format)):value}}return value});self.parser(function(path,value){if(value){var tmp;switch(config.type){case'date':tmp=self.get();if(tmp)tmp=tmp.format('HH:mm');else tmp='';return value+(tmp?(' '+tmp):'');case'lower':case'email':value=value.toLowerCase();break;case'upper':value=value.toUpperCase();break;case'phone':value=value.replace(/\s/g,'');break;case'number2':if(value){var type=typeof(value);if(type==='string'&&(/^[\-0-9\.\,]+$/).test(value))value=value.parseFloat();else if(type!=='number')value=null}else value=null;break;case'time':tmp=value.split(':');var dt=self.get();value=dt?new Date(dt.getTime()):new Date();value.setHours((tmp[0]||'0').parseInt());value.setMinutes((tmp[1]||'0').parseInt());value.setSeconds((tmp[2]||'0').parseInt());break;case'slug':value=value.slug();break}}else{switch(config.type){case'number':value=0;break;case'number2':case'date':value=null;break}}return value?config.spaces===false?value.replace(/\s/g,''):value:value});self.state=function(type,what){if(type){if(type===1&&what===4){self.rclass(cls+'-ok '+cls+'-invalid');self.$oldstate=null;return}var invalid=config.required?self.isInvalid():self.forcedvalidation()?self.isInvalid():false;if(invalid!==self.$oldstate){self.$oldstate=invalid;self.tclass(cls+'-invalid',invalid);self.tclass(cls+'-ok',!invalid);config.error&&self.find(cls2+'-error').tclass('hidden',!invalid)}}};self.forcedvalidation=function(){if(!config.forcevalidation)return false;if(config.type==='number'||config.type==='number2')return false;var val=self.get();var type=typeof(val);if(config.type==='checkbox')return val===true||val===1;if(type==='string'&&val&&(config.minlength!=null||config.maxlength!=null)){if((config.minlength!=null&&val.length<config.minlength)||(config.maxlength!=null&&val.length>config.maxlength))return true;if(!config.type||(config.type==='string'||config.type==='multiline'))return false}return(config.type==='phone'||config.type==='email')&&(val!=null&&(type==='string'&&val.length!==0))}});

COMPONENT('layout','space:1;border:0;parent:window;margin:0;remember:1;autoresize:1;minsize:50',function(self,config,cls){var cls2='.'+cls,cache={},drag={},s={},events={},istop2=false,isbottom2=false,isright2=false,loaded=false,resizecache='',settings,prefkey='',prefexpire='1 month',isreset=false,layout=null;self.readonly();self.init=function(){ON('resize2 + resize',function(){for(var i=0;i<M.components.length;i++){var com=M.components[i];if(com.name==='layout'&&com.dom.offsetParent&&com.$ready&&!com.$removed&&com.config.autoresize)com.resize()}})};self.make=function(){self.aclass(cls);self.find('> section').each(function(){var el=$(this);var type=el.attrd('type');if(type.charAt(type.length-1)==='2'){type=type.substring(0,type.length-1);switch(type){case'top':istop2=true;break;case'bottom':isbottom2=true;break;case'right':isright2=true;break}}el.aclass('{0}-{1} hidden {0}-section'.format(cls,type));el.after('<div class="{0}-resize-{1} {0}-resize" data-type="{1}"></div>'.format(cls,type));el.after('<div class="{0}-lock hidden" data-type="{1}"></div>'.format(cls,type));s[type]=el});self.find('> .{0}-resize'.format(cls)).each(function(){var el=$(this);s[el.attrd('type')+'resize']=el});self.find('> .{0}-lock'.format(cls)).each(function(){var el=$(this);s[el.attrd('type')+'lock']=el});var tmp=self.find('> script');if(tmp.length){self.rebind(tmp.html(),true);tmp.remove()}events.bind=function(){var el=$(W);el.bind('mousemove',events.mmove);el.bind('mouseup',events.mup);self.element.bind('mouseleave',events.mup)};events.unbind=function(){var el=$(W);el.unbind('mousemove',events.mmove);el.unbind('mouseup',events.mup);self.element.unbind('mouseleave',events.mup)};events.mdown=function(e){var target=$(e.target);var type=target.attrd('type');var w=self.width();var h=self.height();var m=2;self.element.find('iframe').css('pointer-events','none');drag.cur=self.element.offset();drag.cur.top-=10;drag.cur.left-=8;drag.offset=target.position();drag.el=target;drag.x=e.pageX;drag.y=e.pageY;drag.horizontal=type==='left'||type==='right'?1:0;drag.type=type;drag.plusX=10;drag.plusY=10;drag.newx=-1;drag.newy=-1;drag.w=w;drag.h=h;var ch=cache[type],min=ch.minsize?(ch.minsize.value-1):0;var max=ch.maxsize?(ch.maxsize.value-1):0;target.aclass(cls+'-drag');switch(type){case'top':drag.min=min||(ch.size-m);drag.max=(cache.bottom?(h-s.bottom.height()-config.minsize):0);if(max&&drag.max>max)drag.max=max;break;case'right':drag.min=(min||ch.size);drag.max=(cache.left?(w-s.left.width()-config.minsize):0);if(max&&drag.max>max)drag.max=max;break;case'bottom':drag.min=(min||ch.size);drag.max=(cache.top?(h-s.top.height()-config.minsize):0);if(max&&drag.max>max)drag.max=max;break;case'left':drag.min=min||(ch.size-m);if(drag.min<config.minsize)drag.min=config.minsize;drag.max=(cache.right?(w-s.right.width()-config.minsize):0);if(max&&drag.max>max)drag.max=max;break}events.bind()};events.mmove=function(e){if(drag.horizontal){var x=drag.offset.left+(e.pageX-drag.x);if(drag.type==='right')x=drag.w-x;if(x<drag.min)x=drag.min+1;if(drag.max&&x>drag.max)x=drag.max-1;if(drag.type==='right')x=drag.w-x;drag.newy=x;drag.el.css('left',x+'px')}else{var y=drag.offset.top+(e.pageY-drag.y);if(drag.type==='bottom')y=drag.h-y;if(y<drag.min)y=drag.min+1;if(drag.max&&y>drag.max)y=drag.max-1;if(drag.type==='bottom')y=drag.h-y;drag.newy=y;drag.el.css('top',y+'px')}};events.mup=function(){self.element.find('iframe').css('pointer-events','');var offset=drag.el.position();var d=WIDTH();var pk=prefkey+'_'+layout+'_'+drag.type+'_'+d;drag.el.rclass(cls+'-drag');if(drag.horizontal){var w=offset.left;if(!isright2&&drag.type==='right'){w=self.width()-w;return}if(isright2)w-=s[drag.type].offset().left;s[drag.type].css('width',w);config.remember&&PREF.set(pk,w,prefexpire)}else{var h=offset.top;if(drag.type==='bottom'||drag.type==='preview')h=self.height()-h;s[drag.type].css('height',h);config.remember&&PREF.set(pk,h,prefexpire)}events.unbind();self.refresh()};self.find('> '+cls2+'-resize').on('mousedown',events.mdown)};self.lock=function(type,b){var el=s[type+'lock'];el&&el.tclass('hidden',b==null?b:!b)};self.rebind=function(code,noresize){code=code.trim();prefkey='L'+HASH(code);resizecache='';settings=new Function('return '+code)();!noresize&&self.resize()};var getSize=function(display,data){var obj=data[display];if(obj)return obj;switch(display){case'md':return getSize('lg',data);case'sm':return getSize('md',data);case'xs':return getSize('sm',data)}return data};var checktimeout=null,check=function(){checktimeout=null;self.resize()};self.resize=function(){if(self.dom.offsetParent==null){if(!checktimeout)checktimeout=setTimeout(check,500);return}if(checktimeout){clearTimeout(checktimeout);checktimeout=null}if(settings==null)return;var d=WIDTH();var el=self.parent(config.parent);var width=el.width();var height=el.height();var key=d+'x'+width+'x'+height;if(resizecache===key)return;var tmp=layout?settings[layout]:settings;if(tmp==null){WARN('j-Layout: layout "{0}" not found'.format(layout));tmp=settings}var size=getSize(d,tmp);height-=config.margin;resizecache=key;self.css({width:width,height:height});for(var k in s){el=s[k];self.update(k,size[k]?size[k]:settings[k])}config.resize&&self.EXEC(config.resize,d,width,height)};var parseSize=function(val,size){var str=typeof(val)==='string';var obj={raw:str?val.parseFloat():val,percentage:str?val.charAt(val.length-1)==='%':false};obj.value=obj.percentage?((((size/100)*obj.raw)>>0)-config.space):obj.raw;return obj};self.reset=function(){isreset=true;resizecache='';self.resize()};self.layout=function(name){if(name==null)name='';if(layout!=name){layout=name;resizecache='';self.resize()}};self.update=function(type,opt){if(opt==null)return;if(typeof(opt)==='string')opt=opt.parseConfig();if(s[type]==null)return;var el=s[type],css={},is=0,size=null,d=WIDTH();var c=cache[type];if(c==null)c=cache[type]={};var w=self.width();var h=self.height();var pk=prefkey+'_'+layout+'_'+type+'_'+d,cached=PREF.get(pk,prefexpire);if(isreset){cached&&PREF.set(pk);cached=0}var def=getSize(d,settings);var width=(opt.size||opt.width)||(def[type]?def[type].width:0);var height=(opt.size||opt.height)||(def[type]?def[type].height:0);if(width&&(type==='left'||type==='right')){size=parseSize(width,w);c.size=size.value;css.width=cached?cached:size.value;is=1}if(type==='left'||type==='right'){c.minsize=opt.minsize?parseSize(opt.minsize,w):0;c.maxsize=opt.maxsize?parseSize(opt.maxsize,w):0}else if(type==='top'||type==='bottom'){c.minsize=opt.minsize?parseSize(opt.minsize,h):0;c.maxsize=opt.maxsize?parseSize(opt.maxsize,h):0}if(height&&(type==='top'||type==='bottom')){size=parseSize(height,h);c.size=size.value;css.height=(cached?cached:size.value);is=1}if(opt.show==null)opt.show=true;el.tclass('hidden',!opt.show);c.show=!!opt.show;c.resize=opt.resize==null?false:!!opt.resize;el.tclass(cls+'-resizable',c.resize);s[type+'resize'].tclass('hidden',!c.show||!c.resize);is&&el.css(css);setTimeout2(self.ID+'refresh',self.refresh,50)};var getWidth=function(el){return el.hclass('hidden')?0:el.width()};var getHeight=function(el){return el.hclass('hidden')?0:el.height()};self.refresh=function(){var top=0,bottom=0,right=0,left=0,hidden='hidden',top2=0,bottom2=0,space=2,topbottomoffset=0,right2visible=isright2&&!s.right.hclass(hidden);if(s.top)top=top2=getHeight(s.top);if(s.bottom)bottom=bottom2=getHeight(s.bottom);var width=self.width()-(config.border*2);var height=self.height()-(config.border*2);if(istop2){topbottomoffset++;top2=0}if(isbottom2){topbottomoffset--;bottom2=0}if(s.left&&!s.left.hclass(hidden)){var cssleft={};space=top&&bottom?2:top||bottom?1:0;cssleft.left=0;cssleft.top=istop2?config.border:(top?(top+config.space):0);cssleft.height=isbottom2?(height-top2-config.border):(height-top2-bottom2-(config.space*space));cssleft.height+=topbottomoffset;s.left.css(cssleft);cssleft.width=s.left.width();s.leftlock.css(cssleft);delete cssleft.width;left=s.left.width();cssleft.left=s.left.width();s.leftresize.css(cssleft);s.leftresize.tclass(hidden,!s.left.hclass(cls+'-resizable'))}if(s.right&&!s.right.hclass(hidden)){right=s.right.width();space=top&&bottom?2:top||bottom?1:0;var cssright={};cssright.left=right2visible?(getWidth(s.left)+config.border+config.space):(width-right);cssright.top=istop2?config.border:(top?(top+config.space):0);cssright.height=isbottom2?(height-top2-config.border):(height-top2-bottom2-(config.space*space));cssright.height+=topbottomoffset;s.right.css(cssright);cssright.width=s.right.width();if(!isright2&&(width-cssright.left)<=0){s.right.css('left',0);cssright.width++}s.rightlock.css(cssright);delete cssright.width;if(right2visible)cssright.left+=s.right.width();else cssright.left=width-right-2;s.rightresize.css(cssright);s.rightresize.tclass(hidden,!s.right.hclass(cls+'-resizable'))}if(s.top){var csstop={};space=left?config.space:0;csstop.left=istop2?(left+space):0;if(right2visible&&istop2)csstop.left+=getWidth(s.right)+config.space;space=left&&right?2:left||right?1:0;csstop.width=istop2?(width-right-left-(config.space*space)):width;csstop.top=0;s.top.css(csstop);s.topresize.css(csstop);csstop.height=s.top.height();s.toplock.css(csstop);delete csstop.height;csstop.top=s.top.height();s.topresize.css(csstop);s.topresize.tclass(hidden,!s.top.hclass(cls+'-resizable'))}if(s.bottom){var cssbottom={};cssbottom.top=height-bottom;space=left?config.space:0;cssbottom.left=isbottom2?(left+space):0;if(right2visible&&isbottom2)cssbottom.left+=getWidth(s.right)+config.space;space=left&&right?2:left||right?1:0;cssbottom.width=isbottom2?(width-right-left-(config.space*space)):width;s.bottom.css(cssbottom);cssbottom.height=s.bottom.height();s.bottomlock.css(cssbottom);delete cssbottom.height;cssbottom.top=cssbottom.top-2;s.bottomresize.css(cssbottom);s.bottomresize.tclass(hidden,!s.bottom.hclass(cls+'-resizable'))}var space=left&&right?2:left?1:right?1:0,css={};css.left=left?left+config.space:0;if(right2visible)css.left+=getWidth(s.right)+config.space;css.width=(width-left-right-(config.space*space));css.top=top?top+config.space:0;space=top&&bottom?2:top||bottom?1:0;css.height=height-top-bottom-(config.space*space);s.main&&s.main.css(css);s.mainlock&&s.mainlock.css(css);self.element.SETTER('*/resize');config.resize&&self.EXEC(config.resize,WIDTH(),width,height);if(loaded==false){loaded=true;self.rclass('invisible')}isreset=false};self.setter=function(value){self.layout(value)}});

COMPONENT('loading',function(self,config,cls){var delay,prev;self.readonly();self.singleton();self.nocompile();self.make=function(){self.aclass(cls+' '+cls+'-'+(config.style||1));self.append('<div><div class="'+cls+'-text hellip"></div></div>')};self.show=function(text){clearTimeout(delay);if(prev!==text){prev=text;self.find('.'+cls+'-text').html(text||'')}self.rclass('hidden');document.activeElement&&document.activeElement.blur();return self};self.hide=function(timeout){clearTimeout(delay);delay=setTimeout(function(){self.aclass('hidden')},timeout||1);return self}});

COMPONENT('locale',function(self,config){self.singleton();self.nocompile();self.readonly();self.use=function(language){if(!language)return;var fdw=0;var nf=1;var tf=24;var df='';switch(language){case'af':nf=2;df='dd/MM/yyyy';tf=24;fdw=0;break;case'sq':nf=2;df='dd/MM/yyyy';tf=24;fdw=1;break;case'ar':nf=4;df='yyyy/MM/dd';tf=24;fdw=6;break;case'ar-dz':nf=3;df='dd/yyyy/MM';tf=24;fdw=1;break;case'ar-kw':nf=4;df='dd/MM/yyyy';tf=24;fdw=6;break;case'ar-ly':nf=3;df='dd/yyyy/MM';tf=24;fdw=6;break;case'ar-ma':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'ar-sa':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'ar-tn':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'hy-am':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'az':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'bm':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'be':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'bn':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'bn-bd':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'bs':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'br':nf=2;df='dd/MM/yyyy';tf=24;fdw=1;break;case'bg':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'my':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'km':nf=3;df='dd/MM/yyyy';tf=24;fdw=0;break;case'ca':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'tzm':nf=3;df='dd/MM/yyyy';tf=24;fdw=6;break;case'tzm-latn':nf=3;df='dd/MM/yyyy';tf=24;fdw=6;break;case'zh-cn':nf=4;df='yyyy/MM/dd';tf=24;fdw=0;break;case'zh-hk':nf=4;df='yyyy/MM/dd';tf=24;fdw=0;break;case'zh-mo':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'zh-tw':nf=4;df='yyyy/MM/dd';tf=24;fdw=0;break;case'cv':nf=2;df='dd-MM-yyyy';tf=24;fdw=1;break;case'hr':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'cs':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'da':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'nl':nf=3;df='dd-MM-yyyy';tf=24;fdw=1;break;case'nl-be':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'en-au':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'en-ca':nf=4;df='yyyy-MM-dd';tf=12;fdw=0;break;case'en-in':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'en-ie':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'en-il':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'en-nz':nf=4;df='dd/MM/yyyy';tf=12;fdw=1;break;case'en-sg':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'en-gb':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'en':nf=4;df='MM/dd/yyyy';tf=12;fdw=0;break;case'us':nf=4;df='MM-dd-yyyy';tf=12;fdw=0;language='en';break;case'eo':nf=2;df='yyyy-MM-dd';tf=24;fdw=1;break;case'et':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'fo':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'fil':nf=4;df='MM/dd/yyyy';tf=24;fdw=0;break;case'fi':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'fr':nf=2;df='dd/MM/yyyy';tf=24;fdw=1;break;case'fr-ca':nf=4;df='yyyy-MM-dd';tf=24;fdw=0;break;case'fr-ch':nf=1;df='dd.MM.yyyy';tf=24;fdw=1;break;case'fy':nf=3;df='dd-MM-yyyy';tf=24;fdw=1;break;case'gl':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'ka':nf=2;df='dd/MM/yyyy';tf=24;fdw=1;break;case'de':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'de-at':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'de-ch':nf=1;df='dd.MM.yyyy';tf=24;fdw=1;break;case'el':nf=3;df='dd/MM/yyyy';tf=12;fdw=1;break;case'gu':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'he':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'hi':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'hu':nf=2;df='yyyy.MM.dd';tf=24;fdw=1;break;case'is':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'id':nf=3;df='dd/MM/yyyy';tf=24;fdw=0;break;case'ga':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'it':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'it-ch':nf=1;df='dd.MM.yyyy';tf=24;fdw=1;break;case'ja':nf=4;df='yyyy/MM/dd';tf=24;fdw=0;break;case'jv':nf=3;df='dd/MM/yyyy';tf=24;fdw=0;break;case'kn':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'kk':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'tlh':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'gom-deva':nf=4;df='dd-MM-yyyy';tf=12;fdw=0;break;case'gom-latn':nf=4;df='dd-MM-yyyy';tf=12;fdw=0;break;case'ko':nf=4;df='yyyy.MM.dd';tf=12;fdw=0;break;case'ku':nf=4;df='dd/MM/yyyy';tf=24;fdw=6;break;case'ky':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'lo':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'lv':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'lt':nf=2;df='yyyy-MM-dd';tf=24;fdw=1;break;case'lb':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'mk':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'ms-my':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'ms':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'ml':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'dv':nf=4;df='dd/MM/yyyy';tf=24;fdw=5;break;case'mt':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'mi':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'mr':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'mn':nf=4;df='yyyy-MM-dd';tf=24;fdw=1;break;case'me':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'ne':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'se':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'nb':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'nn':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'oc-lnc':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'fa':nf=4;df='dd/MM/yyyy';tf=24;fdw=6;break;case'pl':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'pt':nf=2;df='dd/MM/yyyy';tf=24;fdw=0;break;case'pt-br':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'x-pseudo':nf=2;df='dd/MM/yyyy';tf=12;fdw=1;break;case'pa-in':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'ro':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'ru':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'gd':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'sr':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'sr-cyrl':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'sd':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'si':nf=4;df='yyyy/MM/dd';tf=12;fdw=1;break;case'sk':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'eu':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;language='en';break;case'sl':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'es':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'es-do':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'es-mx':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'es-us':nf=4;df='MM/dd/yyyy';tf=12;fdw=0;break;case'sw':nf=4;df='dd.MM.yyyy';tf=24;fdw=1;break;case'sv':nf=2;df='yyyy-MM-dd';tf=24;fdw=1;break;case'tl-ph':nf=4;df='MM/dd/yyyy';tf=24;fdw=0;break;case'tg':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'tzl':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'ta':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'te':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'tet':nf=2;df='dd/MM/yyyy';tf=24;fdw=1;break;case'th':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'bo':nf=4;df='dd/MM/yyyy';tf=12;fdw=0;break;case'tr':nf=3;df='dd.MM.yyyy';tf=24;fdw=1;break;case'tk':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'uk':nf=2;df='dd.MM.yyyy';tf=24;fdw=1;break;case'ur':nf=4;df='dd/MM/yyyy';tf=24;fdw=0;break;case'ug-cn':nf=4;df='yyyy-MM-dd';tf=24;fdw=0;break;case'uz':nf=2;df='dd/MM/yyyy';tf=24;fdw=1;break;case'uz-latn':nf=2;df='dd/MM/yyyy';tf=24;fdw=1;break;case'vi':nf=3;df='dd/MM/yyyy';tf=24;fdw=1;break;case'cy':nf=4;df='dd/MM/yyyy';tf=24;fdw=1;break;case'yo':nf=4;df='dd/MM/yyyy';tf=12;fdw=1;break;case'ss':nf=4;df='dd/MM/yyyy';tf=12;fdw=1;break}if(!df)return false;if(config.requests)DEF.languagehtml=language;DEF.dateformat=df;DEF.timeformat=tf===12?'!HH:mm a':'HH:mm';DEF.firstdayofweek=fdw;DEF.decimalseparator=nf===2||nf===3?',':'.';DEF.thousandsseparator=nf===4?',':nf===3?'.':' ';ENV('ts',(tf===12?'!':'')+df+' - '+(tf===12?DEF.timeformat.substring(1):DEF.timeformat));ENV('date',DEF.dateformat);ENV('time',DEF.timeformat);CONFIG('datepicker,firstday','firstday:'+fdw);CONFIG('timepicker','ampm:'+tf===12?'true':'false');self.path&&self.set({df:df,tf:tf,fdw:fdw,nf:nf});return true};self.make=function(){if(config.language){self.use(config.language)}else{var language=navigator.language.toLowerCase();if(!self.use(language.split('-')[0]))self.use(language)}}});

COMPONENT('menu','style:2',function(self,config,cls){self.singleton();self.readonly();self.nocompile&&self.nocompile();var cls2='.'+cls,is=false,issubmenu=false,events={},ul,children,prevsub,parentclass,container;self.make=function(){self.aclass('hidden '+cls+'-area');self.append('<div class="{0} {0}-style-{1}"><div class="{0}-items"><ul></ul></div><div class="{0}-submenu hidden"><ul></ul></div>'.format(cls,config.style));container=self.find('> '+cls2);ul=self.find(cls2+'-items').find('ul');children=self.find(cls2+'-submenu');self.element.on('click',function(e){if(e.target===self.dom)self.hide()});self.event('click','li',function(e){var el=$(this);if(!el.hclass(cls+'-divider')&&!el.hclass(cls+'-disabled')){self.opt.scope&&M.scope(self.opt.scope);var index=el.attrd('index').split('-');if(index.length>1){self.opt.callback(self.opt.items[+index[0]].children[+index[1]]);self.hide()}else if(!issubmenu){self.opt.callback(self.opt.items[+index[0]]);self.hide()}}e.preventDefault();e.stopPropagation()});self.event('contextmenu',function(e){e.preventDefault();e.stopPropagation();self.hide()});events.hide=function(){is&&self.hide()};self.event('scroll',events.hide);self.on('reflow + scroll + resize + resize2',events.hide);events.hidechildren=function(){if($(this.parentNode.parentNode).hclass(cls+'-items')){if(prevsub&&prevsub[0]!==this){prevsub.rclass(cls+'-selected');prevsub=null;children.aclass('hidden');issubmenu=false}}};events.children=function(){if(prevsub&&prevsub[0]!==this){prevsub.rclass(cls+'-selected');prevsub=null}issubmenu=true;var el=prevsub=$(this);var index=+el.attrd('index');var item=self.opt.items[index];el.aclass(cls+'-selected');var html=self.makehtml(item.children,index);children.find('ul').html(html);children.rclass('hidden');var css={},offset=el.position();css.left=ul.width()-5;css.top=offset.top-5;var offsetX=offset.left;offset=self.element.offset();var w=children.width();var left=offset.left+css.left+w;if(left>(WW+30))css.left=(offsetX-w)+5;children.css(css);var leftoffset=children.offset().left;var childrenwidth=children.width();var suboffset=childrenwidth+leftoffset;if(suboffset>WW)children.css('left',-childrenwidth)}};self.bindevents=function(){events.is=true;$(document).on('touchstart mouseenter mousedown',cls2+'-children',events.children);$(W).on('scroll',events.hide);self.element.on('mouseenter','li',events.hidechildren)};self.unbindevents=function(){events.is=false;$(document).off('touchstart mouseenter mousedown',cls2+'-children',events.children);$(W).off('scroll',events.hide);self.element.off('mouseenter','li',events.hidechildren)};self.showxy=function(x,y,items,callback){var opt={};opt.x=x;opt.y=y;opt.items=items;opt.callback=callback;self.show(opt)};self.makehtml=function(items,index){var builder=[],tmp;for(var i=0;i<items.length;i++){var item=items[i];if(typeof(item)==='string'){if(item==='-')tmp='<hr />';else tmp='<span>{0}</span>'.format(item);builder.push('<li class="{0}-divider">{1}</li>'.format(cls,tmp));continue}var cn=item.classname||item.class||'',icon='',color=item.color?'style="color:{color}"'.arg(item):'';if(item.icon)icon='<i class="{0}" {1}></i>'.format(item.icon.charAt(0)==='!'?item.icon.substring(1):item.icon.indexOf(' ')===-1?('ti ti-'+item.icon):item.icon,color);else cn=(cn?(cn+' '):'')+cls+'-nofa';tmp='';if(index==null&&item.children&&item.children.length){cn+=(cn?' ':'')+cls+'-children';tmp+='<i class="ti ti-angle-right pull-right"></i>'}if(item.selected)cn+=(cn?' ':'')+cls+'-selected';if(item.disabled)cn+=(cn?' ':'')+cls+'-disabled';tmp+='<div class="{0}-name">{1}{2}{3}</div>'.format(cls,icon,item.name,item.shortcut?'<b>{0}</b>'.format(item.shortcut):'');if(item.note)tmp+='<div class="ui-menu-note">{0}</div>'.format(item.note);builder.push('<li class="{0}" data-index="{2}">{1}</li>'.format(cn,tmp,(index!=null?(index+'-'):'')+i))}return builder.join('')};self.show=function(opt){if(typeof(opt)==='string'){opt={align:opt};opt.element=arguments[1];opt.items=arguments[2];opt.callback=arguments[3];opt.offsetX=arguments[4];opt.offsetY=arguments[5]}var tmp=opt.element?opt.element instanceof jQuery?opt.element[0]:opt.element.element?opt.element.dom:opt.element:null;if(is&&tmp&&self.target===tmp){self.hide();return}var tmp;self.target=tmp;self.opt=opt;opt.scope=M.scope();var c=opt.classname||opt.class;if(parentclass&&c!==parentclass){self.rclass(parentclass);parentclass=null}self.tclass('ui-large',opt.large==true);if(!opt.nomobile){self.find('{0}'.format(cls2)).aclass('{0}-mobile'.format(cls))}issubmenu=false;prevsub=null;var css={};children.aclass('hidden');children.find('ul').empty();ul.html(self.makehtml(opt.items));if(!parentclass&&c){self.aclass(c);parentclass=c}if(is){css.left=0;css.top=0;container.css(css)}else{self.rclass('hidden');self.aclass(cls+'-visible',100);is=true;if(!events.is)self.bindevents()}var target=$(opt.element);var plusW=opt.offsetWidth||0;if(opt.fixedwidth){var tmpw=target.width()+plusW;container.css({'max-width':tmpw,width:tmpw});plusW=0}else container.css({'max-width':'',width:''});var w=container.width();var offset=target.offset();if(opt.element){switch(opt.align){case'center':css.left=Math.ceil((offset.left-w/2)+(target.innerWidth()/2));break;case'right':css.left=(offset.left-w)+target.innerWidth();break;default:css.left=offset.left;break}css.top=opt.position==='bottom'?(offset.top-container.height()-10):(offset.top+target.innerHeight()+10)}else{css.left=opt.x;css.top=opt.y}if(opt.position==='bottom')css.top+=10;else css.top-=10;if(opt.offsetX)css.left+=opt.offsetX;if(opt.offsetY)css.top+=opt.offsetY;var mw=w,mh=container.height();if(css.left<0)css.left=10;else if((mw+css.left)>WW)css.left=(WW-mw)-10;if(css.top<0)css.top=10;else if((mh+css.top)>WH)css.top=(WH-mh)-10;container.css(css)};self.hide=function(){events.is&&self.unbindevents();is=false;self.opt&&self.opt.hide&&self.opt.hide();self.target=null;self.opt=null;self.aclass('hidden');self.rclass(cls+'-visible')}});

COMPONENT('message','button:OK;style:2',function(self,config,cls){var cls2='.'+cls,is,events={};self.readonly();self.singleton();self.nocompile&&self.nocompile();self.make=function(){var pls=(config.style===2?(' '+cls+'2'):'');self.aclass(cls+' hidden'+pls);if(config.closeoutside)self.event('click',function(e){var node=e.target,skip={SPAN:1,A:1,I:1};if(!skip[node.tagName])self.hide()});else self.event('click','button',self.hide)};events.keyup=function(e){if(e.which===27)self.hide()};events.bind=function(){if(!events.is){$(W).on('keyup',events.keyup);events.is=false}};events.unbind=function(){if(events.is){events.is=false;$(W).off('keyup',events.keyup)}};self.warning=function(message,icon,fn){if(typeof(icon)==='function'){fn=icon;icon=undefined}if(message instanceof Array){var builder=[];for(var i=0;i<message.length;i++){var err=message[i].error;err&&builder.push(err)}message=builder.join('<br />')}self.callback=fn;self.content(cls+'-warning',message,icon||'warning')};self.info=function(message,icon,fn){if(typeof(icon)==='function'){fn=icon;icon=undefined}if(message instanceof Array){var builder=[];for(var i=0;i<message.length;i++){var err=message[i].error;err&&builder.push(err)}message=builder.join('<br />')}self.callback=fn;self.content(cls+'-info',message,icon||'info-circle')};self.success=function(message,icon,fn){if(typeof(icon)==='function'){fn=icon;icon=undefined}self.callback=fn;self.content(cls+'-success',message,icon||'check-circle')};self.response=function(message,callback,response){var fn;if(typeof(message)==='function'){response=callback;fn=message;message=null}else if(typeof(callback)==='function')fn=callback;else{response=callback;fn=null}if(response instanceof Array){var builder=[];for(var i=0;i<response.length;i++){var err=response[i].error;err&&builder.push(err)}self.warning(builder.join('<br />'));SETTER('!loading/hide')}else if(typeof(response)==='string'){self.warning(response);SETTER('!loading/hide')}else{if(message){if(message.length<40&&message.charAt(0)==='?')SET(message,response);else self.success(message)}if(typeof(fn)==='string')SET(fn,response);else if(fn)fn(response)}};self.hide=function(){events.unbind();self.callback&&self.callback();self.aclass('hidden')};self.content=function(classname,text,icon){if(icon.indexOf(' ')===-1)icon='ti ti-'+icon;!is&&self.html('<div><div class="{0}-icon"><i class="{1}"></i></div><div class="{0}-body"><div class="{0}-text"></div><hr /><button>{2}</button></div></div>'.format(cls,icon,config.button));self.rclass2(cls+'-').aclass(classname);self.find(cls2+'-body').rclass().aclass(cls+'-body');is&&self.find(cls2+'-icon').find('.ti').rclass2('ti').aclass(icon);self.find(cls2+'-text').html(text);self.rclass('hidden');self.element.focus();is=true;events.bind();document.activeElement&&document.activeElement.blur();setTimeout(function(){self.aclass(cls+'-visible');setTimeout(function(){self.find(cls2+'-icon').aclass(cls+'-icon-animate');document.activeElement&&document.activeElement.blur()},300)},100)}});

COMPONENT('movable','move:true',function(self,config){var events={},draggable,check;self.readonly();self.make=function(){var target=config.global?$(document):config.parent?self.parent(config.parent):self.element;target.on('dragenter dragover dragexit drop dragleave dragstart',config.selector,events.ondrag).on('mousedown',config.selector,events.ondown)};self.configure=function(key,value){if(key==='check')check=value?GET(self.makepath(value)):null};events.ondrag=function(e){if(config.disabled||!draggable){e.preventDefault();return}if(e.type!=='dragstart'){e.stopPropagation();e.preventDefault()}switch(e.type){case'drop':var parent=config.container?$(draggable).closest(config.container)[0]:draggable.parentNode;var a=draggable,b=e.target,ai=-1,bi=-1,is=false;draggable=null;while(true){if(b.parentNode===parent){is=true;break}b=b.parentNode;if(b==null||b.tagName==='HTML')break}if(a===b||!is)return;for(var i=0;i<parent.children.length;i++){var child=parent.children[i];if(a===child)ai=i;else if(b===child)bi=i;if(bi!==-1&&ai!==-1)break}var children,$b=$(e.target);b=$b.filter(config.selector);if(!b.length)b=$b.closest(config.selector);if(b.length)b=b[0];else return;if(config.move){if(ai>bi)parent.insertBefore(a,b);else parent.insertBefore(a,b.nextSibling);children=$(parent).find(config.selector).toArray()}else{children=$(parent).find(config.selector);var tmp=[];for(var i=0;i<children.length;i++){var item=children[i];if(item===a)tmp.push(b);else if(item===b)tmp.push(a);else tmp.push(item)}children=tmp}config.exec&&self.EXEC(config.exec,children,a,b);self.path&&self.change(true);break;case'dragstart':var eo=e.originalEvent;eo.dataTransfer&&eo.dataTransfer.setData('text','1');break;case'dragenter':case'dragover':case'dragexit':case'dragleave':break}};events.ondown=function(e){if(config.disabled)return;if(e.target.nodeName==='INPUT'||e.target.nodeName==='TEXTAREA')draggable=null;else draggable=!check||check($(this))?this:null};self.destroy=function(){$(document).off('dragenter dragover dragexit drop dragleave dragstart',config.selector,events.ondrag).off('mousedown',config.selector,events.ondown)}});

COMPONENT('notify','timeout:3000;position:top-right',function(self,config,cls){var cls2='.'+cls,istop=false,autoclosing;self.singleton();self.readonly();self.nocompile();self.template=Tangular.compile('<div class="{0} {0}-{{ type}} {0}-hidden" data-id="{{ id}}"><figure><div class="{0}-dot"></div><div class="{0}-icon"><i class="ti {{ icon}}"></i></div><div class="{0}-message">{{ message | raw}}</div></figure></div>'.format(cls));self.items={};self.make=function(){self.aclass(cls+'-container');self.event('click',cls2,function(){var el=$(this);self.close(el.attrd('id'));clearTimeout(autoclosing);autoclosing=null;self.autoclose()})};self.configure=function(key,value){if(key==='position'){var c=cls+'-container-';self.rclass2(c).aclass(c+value.replace(/_|\s/,'-'));istop=value.indexOf('top')!==-1}};self.close=function(id){var obj=self.items[id];if(obj){delete self.items[id];var item=self.find('div[data-id="{0}"]'.format(id));item.find('figure').empty();item.animate({height:0},300,function(){item.remove()})}};self.response=function(message,callback,response){var fn;if(typeof(message)==='function'){response=callback;fn=message;message=null}else if(typeof(callback)==='function')fn=callback;else{response=callback;fn=null}if(response instanceof Array){var builder=[];for(var i=0;i<response.length;i++){var err=response[i].error;err&&builder.push(err)}self.append(builder.join('<br />'),2);SETTER('!loading/hide')}else if(typeof(response)==='string'){self.append(response,2);SETTER('!loading/hide')}else{if(message){if(message.length<40&&message.charAt(0)==='?')SET(message,response);else self.append(message,1)}if(typeof(fn)==='string')SET(fn,response);else if(fn)fn(response)}};self.warning=function(message){self.append(message,2)};self.success=function(message){self.append(message,1)};self.info=function(message){self.append(message,3)};self.append=function(message,type){if(!type)type=1;switch(type){case'success':type=1;break;case'warning':type=2;break;case'info':type=3;break}var icon;if(message.charAt(0)==='"'){var index=message.indexOf('"',1);icon=self.faicon(message.substring(1,index).trim());message=message.substring(index+1).trim()}var obj={id:Math.floor(Math.random()*100000).toString(36),message:message,type:type,icon:icon||(type===1?'ti-check-circle':type===2?'ti-times-circle':'ti-info-circle')};self.items[obj.id]=obj;var el=$(self.template(obj));if(istop)self.element.append(el);else self.element.prepend(el);self.autoclose();setTimeout(function(){el.rclass(cls+'-hidden')},20)};self.autoclose=function(){if(autoclosing)return;autoclosing=setTimeout(function(){clearTimeout(autoclosing);autoclosing=null;var el=self.find(cls2);el.length>1&&self.autoclose();el.length&&self.close(el.eq(istop?0:(el.length-1)).attrd('id'))},config.timeout)}});

COMPONENT('page','hide:1;loading:1;delay:500;delayloading:800',function(self,config,cls){var init=false,clid=null,downloading=false,isresizing=false,cache={};self.releasemode&&self.releasemode('true');self.readonly();self.make=function(){self.aclass(cls)};self.resize=function(){if(config.absolute){var pos=self.element.position();var obj={};obj.width=WW-pos.left;obj.height=WH-pos.top;self.css(obj)}};var replace=function(value){return value.replace(/\?/g,config.path||config.if)};self.setter=function(value){if(cache[value]){if(downloading)return;if(config.absolute&&!isresizing){self.on('resize2',self.resize);isresizing=true}if(self.dom.hasChildNodes()){if(clid){clearTimeout(clid);clid=null}self.release(false);var done=function(){config.hide&&self.rclass('hidden');config.reload&&EXEC(replace(config.reload));config.default&&DEFAULT(replace(config.default),true);var invisible=self.hclass('invisible');invisible&&self.rclass('invisible',config.delay);isresizing&&setTimeout(self.resize,50);setTimeout(self.emitresize,200);config.autofocus&&self.autofocus(config.autofocus)};if(config.check)EXEC(replace(config.check),done);else done()}else{config.loading&&SETTER('loading/show');downloading=true;setTimeout(function(){var preparator;if(config.replace)preparator=GET(replace(config.replace));else{preparator=function(content){var path=replace(config.path||config.if);return ADAPT(path,config.id,content)}}self.import(replace(config.url),function(){if(!init){config.init&&EXEC(replace(config.init));init=true}var done=function(){config.hide&&self.rclass('hidden');self.release(false);config.reload&&EXEC(replace(config.reload),true);config.default&&DEFAULT(replace(config.default),true);config.loading&&SETTER('loading/hide',config.delayloading);var invisible=self.hclass('invisible');invisible&&self.rclass('invisible',config.delay);isresizing&&setTimeout(self.resize,50);setTimeout(self.emitresize,200);downloading=false;config.autofocus&&self.autofocus(config.autofocus)};EMIT('pages.'+config.if,self.element,self);if(config.check)EXEC(replace(config.check),done);else done()},true,preparator)},200)}}else{if(!self.hclass('hidden')){config.hidden&&EXEC(replace(config.hidden));config.hide&&self.aclass('hidden'+(config.invisible?' invisible':''));self.release(true)}if(config.cleaner&&init&&!clid)clid=setTimeout(self.clean,config.cleaner*60000)}};self.emitresize=function(){self.element.SETTER('*','resize')};self.configure=function(key,value){switch(key){case'if':var tmp=(value+'').split(',').trim();cache={};for(var i=0;i<tmp.length;i++)cache[tmp[i]]=1;break;case'absolute':var is=!!value;self.tclass(cls+'-absolute',is);break}};self.clean=function(){if(self.hclass('hidden')){config.clean&&EXEC(replace(config.clean));setTimeout(function(){self.empty();init=false;clid=null;setTimeout(FREE,1000)},1000)}}});

COMPONENT('radiobutton','inline:1',function(self,config,cls){var cls2='.'+cls,template='<div data-value="{1}"><i></i><span>{0}</span></div>';self.nocompile();self.configure=function(key,value,init){if(init)return;switch(key){case'disabled':self.tclass('ui-disabled',value);break;case'required':self.find(cls2+'-label').tclass(cls+'-label-required',value);break;case'type':self.type=config.type;break;case'label':self.find(cls2+'-label').html(value);break;case'items':self.find('div[data-value]').remove();var builder=[];value.replace(/\\,/g,'\0').split(',').forEach(function(item){item=item.replace(/\0/g,',').split('|');builder.push(template.format((item[0]||item[1]),item[1]||item[0]))});self.append(builder.join(''));self.refresh();break;case'datasource':self.datasource(value,self.bind);break}};self.make=function(){var builder=[],label=config.label||self.html();label&&builder.push('<div class="'+cls+'-label{1}">{0}</div>'.format(label,config.required?(' '+cls+'-label-required'):''));self.aclass(cls+(!config.inline?(' '+cls+'-block'):'')+(config.disabled?' ui-disabled':''));self.event('click','div[data-value]',function(){if(config.disabled)return;var value=self.parser($(this).attrd('value'));self.set(value);self.change(true)});self.html(builder.join(''));config.items&&self.reconfigure('items:'+config.items);config.datasource&&self.reconfigure('datasource:'+config.datasource);config.type&&(self.type=config.type)};self.validate=function(value){return config.disabled||!config.required?true:!!value};self.setter=function(value){self.find('div[data-value]').each(function(){var el=$(this);var is=el.attrd('value')===(value==null?null:value.toString());el.tclass(cls+'-selected',is);el.find('.ti').tclass('ti-circle',!is).tclass('ti-bull',is)})};self.bind=function(path,arr){if(!arr)arr=EMPTYARRAY;var builder=[],propText=config.text||'name',propValue=config.value||'id',type=typeof(arr[0]);var notObj=type==='string'||type==='number';for(var i=0,length=arr.length;i<length;i++){var item=arr[i];if(notObj)builder.push(template.format(item,item));else builder.push(template.format(item[propText],item[propValue]))}self.find('div[data-value]').remove();self.append(builder.join(''));self.refresh()}});

COMPONENT('ready','delay:800',function(self,config){self.readonly();self.blind();self.make=function(){config.rclass&&self.rclass(config.rclass,config.adelay||config.delay);config.aclass&&self.aclass(config.aclass,config.rdelay||config.delay);self.rclass('invisible',config.adelay||config.delay);config.focus&&setTimeout(function(){self.autofocus(config.focus===true||config.focus===1?null:config.focus).focus()},config.fdelay||(config.delay+5))}});

COMPONENT('search','class:hidden;delay:50;attribute:data-search;splitwords:1;delaydatasource:100',function(self,config,cls){self.readonly();self.make=function(){config.datasource&&self.datasource(config.datasource,function(){setTimeout(function(){self.refresh()},config.delaydatasource)})};self.search=function(){var value=self.get();var elements=self.find(config.selector);var length=elements.length;if(!value){elements.rclass(config.class);self.rclass2(cls+'-');config.exec&&self.SEEX(config.exec,{hidden:0,count:length,total:length,search:'',is:false});return}var raw=value.trim();var search=raw.toSearch();var count=0,hidden=0,custom=config.custom?GET(self.makepath(config.custom)):null;if(config.splitwords){search=search.split(' ');raw=raw.split(' ')}self.aclass(cls+'-used');for(var i=0;i<length;i++){var el=elements.eq(i);var is=false;if(custom){is=!custom(el,search);el.tclass(config.class,is);if(is)hidden++;else count++;continue}var val=(el.attr(config.attribute)||'').trim();var fuzzy=val.toSearch();if(search instanceof Array){for(var j=0;j<raw.length;j++){if(val.indexOf(raw[j])===-1){is=true;break}}if(is){is=false;for(var j=0;j<search.length;j++){if(fuzzy.indexOf(search[j])===-1){is=true;break}}}}else is=fuzzy.indexOf(search)===-1&&val.indexOf(raw)===-1;el.tclass(config.class,is);if(is)hidden++;else count++}self.tclass(cls+'-empty',!count);config.exec&&self.SEEX(config.exec,{total:length,hidden:hidden,count:count,search:search,is:true})};self.setter=function(value){if(!config.selector||!config.attribute||value==null)return;setTimeout2('search'+self.ID,self.search,config.delay)}});

COMPONENT('searchinput','searchicon:ti ti-search;cancelicon:ti ti-times;align:left',function(self,config,cls){var input,icon,prev,prev2;self.novalidate();self.make=function(){self.aclass(cls+' '+cls+'-'+config.align);self.html('<span><i class="{0}"></i></span><div><input type="text" autocomplete="new-password" maxlength="100" placeholder="{1}" data-jc-bind /></div>'.format(config.searchicon,config.placeholder));input=self.find('input')[0];icon=self.find('i');self.event('click','span',function(){prev&&self.set('');prev2=''});config.autofocus&&self.autofocus()};self.focus=function(){input&&input.focus()};self.check=function(){var is=!!input.value.trim();if(is!==prev){icon.rclass().aclass(is?config.cancelicon:config.searchicon);prev=is;self.tclass(cls+'-is',is)}};self.clear=function(){input.value='';config.exec&&self.SEEX(config.exec,input.value,self.element);self.check()};self.setter=function(value,path,type){input.value=value||'';if(prev2!==input.value){prev2=input.value;type&&config.exec&&self.SEEX(config.exec,input.value,self.element)}self.check()}});

COMPONENT('selected','class:selected;selector:a;attr:if;attror:or;delay:50',function(self,config){self.readonly();var highlight=function(){var cls=config.class,val=self.get()||'';var arr=self.find(config.selector);for(var m of arr){var el=$(m);var or=el.attrd(config.attror)||'';if(el.attrd(config.attr)===val||(or&&val.includes(or)))el.aclass(cls);else if(el.hclass(cls))el.rclass(cls)}};self.configure=function(key,value){switch(key){case'datasource':self.datasource(value,function(){setTimeout2(self.ID,highlight,config.delay)});break}};self.setter=function(){setTimeout2(self.ID,highlight,config.delay)}});

COMPONENT('shortcuts',function(self){var items=[],length=0,keys={},keys_session={},issession=false;self.singleton();self.readonly();self.blind();self.nocompile&&self.nocompile();var cb=function(o,e){o.callback(e,o.owner)};self.make=function(){$(W).on('keydown',function(e){var f=e.key||'',c=e.keyCode;if(f.length>1&&f.charAt(0)==='F')c=0;else f='-';var key=(e.ctrlKey?1:0)+''+(e.altKey?1:0)+''+(e.shiftKey?1:0)+''+(e.metaKey?1:0)+f+c;if(issession){if(!keys_session[key])return}else{if(!keys[key])return}if(length&&!e.isPropagationStopped()){for(var i=0;i<length;i++){var o=items[i];if(o.fn(e)){if(o.prepare&&!o.prepare(e,e.target))continue;if(o.prevent){e.preventDefault();e.stopPropagation()}setTimeout(cb,100,o,e);return}}}});ON('component + knockknock',self.refresh)};self.refreshforce=function(){var arr=document.querySelectorAll('.shortcut');var index=0;while(true){var item=items[index++];if(item==null)break;if(item.owner){index--;items.splice(index,1)}}for(var i=0;i<arr.length;i++){var shortcut=arr[i].getAttribute('data-shortcut');shortcut&&self.register(shortcut,self.execshortcut,true,null,arr[i])}};self.session=function(callback){issession=true;keys_session={};callback(self.register)};self.end=function(){issession=false};self.execshortcut=function(e,owner){var evt=$.Event('click');evt.shortcutEvent=evt.shortcut=e;$(owner).trigger(evt)};self.refresh=function(){setTimeout2(self.ID,self.refreshforce,500)};self.exec=function(shortcut){var item=items.findItem('shortcut',shortcut.toLowerCase().replace(/\s/g,''));item&&item.callback(null,$(item.owner))};self.register=function(shortcut,callback,prevent,prepare,owner){if(typeof(prevent)==='function'){var tmp=prepare;prepare=prevent;prevent=tmp}var currentkeys=issession?keys_session:keys,ismac=M.ua.os.toLowerCase()==='mac';var special=ismac?'metaKey':'ctrlKey',specialindex=ismac?3:0;shortcut.split(',').trim().forEach(function(shortcut){var builder=[],alias=[],cachekey=[0,0,0,0,'-',0];shortcut.split('+').trim().forEach(function(item){var lower=item.toLowerCase();alias.push(lower);switch(lower){case'ctrl':cachekey[0]=1;break;case'alt':cachekey[1]=1;break;case'shift':cachekey[2]=1;break;case'win':case'meta':case'cmd':cachekey[3]=1;break}switch(lower){case'ctrl':case'alt':case'shift':builder.push('e.{0}Key'.format(lower));return;case'win':case'meta':case'cmd':builder.push('e.metaKey');return;case'ins':builder.push('e.keyCode===45');cachekey[5]=45;return;case'space':builder.push('e.keyCode===32');cachekey[5]=32;return;case'tab':builder.push('e.keyCode===9');cachekey[5]=9;return;case'esc':builder.push('e.keyCode===27');cachekey[5]=27;return;case'enter':builder.push('e.keyCode===13');cachekey[5]=13;return;case'backspace':builder.push('e.keyCode===8');cachekey[5]=8;break;case'del':case'delete':builder.push('e.keyCode===46');cachekey[5]=46;return;case'save':builder.push('(e.{0}&&e.keyCode===83)'.format(special));cachekey[specialindex]=1;cachekey[5]=83;return;case'remove':builder.push('((e.{0}&&e.keyCode===8)||e.keyCode===46)'.format(special));cachekey[5]=-1;return;case'clone':builder.push('(e.{0}&&e.keyCode===68)'.format(special));cachekey[specialindex]=1;cachekey[5]=68;return;case'selectall':builder.push('(e.{0}&&e.keyCode===65)'.format(special));cachekey[specialindex]=1;cachekey[5]=65;return;case'copy':builder.push('(e.{0}&&e.keyCode===67)'.format(special));cachekey[specialindex]=1;cachekey[5]=67;return;case'undo':builder.push('(e.{0}&&e.keyCode===90)'.format(special));cachekey[specialindex]=1;cachekey[5]=90;return;case'redo':builder.push('(e.{0}&&e.shiftKey&&e.keyCode===90)'.format(special));cachekey[specialindex]=1;cachekey[5]=90;return;case'refresh':builder.push('e.key===\'F5\'');cachekey[5]=116;return;case'up':builder.push('e.keyCode===38');cachekey[5]=38;return;case'down':builder.push('e.keyCode===40');cachekey[5]=40;return;case'right':builder.push('e.keyCode===39');cachekey[5]=39;return;case'left':builder.push('e.keyCode===37');cachekey[5]=37;return;case'f1':case'f2':case'f3':case'f4':case'f5':case'f6':case'f7':case'f8':case'f9':case'f10':case'f11':case'f12':var a=item.toUpperCase();builder.push('e.key===\'{0}\''.format(a));cachekey[4]=a;return;case'capslock':builder.push('e.which===20');cachekey[5]=20;return}var num=item.parseInt();if(num){builder.push('e.which==='+num);cachekey[5]=num}else{num=item.toUpperCase().charCodeAt(0);cachekey[5]=num;builder.push('e.keyCode==={0}'.format(num))}});items.push({shortcut:alias.join('+'),fn:new Function('e','return '+builder.join('&&')),callback:callback,prevent:prevent,owner:owner,prepare:prepare});length=items.length;var k;if(cachekey[5]===-1){cachekey[5]=8;cachekey[3]=1;k=cachekey.join('');currentkeys[k]=1;cachekey[3]=0;cachekey[5]=46}k=cachekey.join('');currentkeys[k]=1});if(!owner)self.refresh();return self}});

COMPONENT('spotlight','height:40;placeholder:Search',function(self,config,cls){var cls2='.'+cls,container,timeout,input,search,scroller=null,is=false,selectedindex=0,resultscount=0,skip=false,checksum,prevclass;self.items=null;self.template=Tangular.compile('<figure data-index="{{ $.index}}"{{ if selected}} class="selected"{{ fi}}>{{ if icon}}<i class="{{ icon}}"></i>{{ fi}}{{ if html}}{{ html | raw}}{{ else}}{{ name | raw}}{{ fi}}</figure>');self.callback=null;self.readonly();self.singleton();self.nocompile&&self.nocompile();var onclick=function(e){if(is&&(!$(e.target).closest(cls2).length))self.hide()};self.select=function(index){var item=self.items[index];if(item){self.opt.callback&&self.opt.callback(item);if(!self.opt.recent)return;var key='spotlight'+(self.opt.id||'');var arr=PREF[key]||[],id=HASH(item)+'';item.spotlightid=id;if(arr.length&&arr.findItem('spotlightid',id))return;arr.unshift(item);if(arr.length>10)arr.pop();PREF.set(key,arr,typeof(self.opt.recent)==='string'?self.opt.recent:'1 month')}};self.make=function(){self.aclass(cls+'-layer hidden');self.append('<div class="{1}"><div class="{1}-search"><span><i class="ti ti-search"></i></span><div><input type="text" placeholder="{0}" class="{1}-search-input" /></div></div><div class="{1}-container"><div class="{1}-items"></div></div></div>'.format(config.placeholder,cls));container=self.find(cls2+'-items');scroller=self.find(cls2+'-container');input=self.find('input');search=self.find(cls2);self.event('click','figure[data-index]',function(e){self.select(+this.getAttribute('data-index'));self.hide();e.preventDefault();e.stopPropagation()});self.on('resize2',function(){is&&self.hide(0)});self.event('keydown','input',function(e){skip=false;switch(e.which){case 27:skip=true;self.hide();self.opt.cancel&&self.opt.cancel();break;case 13:skip=true;var sel=self.find('figure.selected');sel.length&&self.select(+sel.attrd('index'));self.hide();break;case 38:skip=true;selectedindex--;if(selectedindex<0)selectedindex=0;else self.move();break;case 40:skip=true;selectedindex++;if(selectedindex>=resultscount)selectedindex=resultscount;else self.move();break}if(skip){e.preventDefault();e.stopPropagation()}});self.event('keyup','input',function(){if(!skip)setTimeout2(self.id,self.search,self.opt.delay||100,null,this.value)})};self.search=function(value){if(typeof(self.opt.search)==='function')self.opt.search(value,self.render);else{var url=self.opt.search.format(encodeURIComponent(value));if(self.opt.cache)AJAXCACHE(url,self.render,self.opt.cache);else AJAX(url,self.render)}};self.move=function(){var itemheight=self.opt.height||config.height,counter=0,h=scroller.css('max-height').parseInt();container.find('figure').each(function(){var el=$(this);if(el.hclass('hidden'))return;var is=selectedindex===counter;el.tclass('selected',is);if(is){var t=(itemheight*counter)-itemheight;if((t+itemheight*5)>h)scroller.scrollTop(t);else scroller.scrollTop(0)}counter++})};self.render=function(items,noremap){if(items){if(!(items instanceof Array)){self.render(items.items||items.response);return}if(!noremap&&self.opt.remap){var tmp=self.opt.remap(items);if(tmp)items=tmp}var newchecksum;if(self.items&&items){newchecksum=HASH(STRINGIFY(items,true));if(checksum===newchecksum)return}checksum=newchecksum;self.items=items}selectedindex=0;resultscount=self.items.length;var builder=[],indexer={};for(var i=0;i<self.items.length;i++){var item=items[i];indexer.index=i;if(item.icon)item.icon=self.faicon(item.icon);builder.push(self.template(item,indexer))}container.html(builder);self.move()};self.show=function(opt){if(is){clearTimeout(timeout);self.hide(0);return}var key='spotlight'+(opt.id||'');var recent=PREF[key];if(self.opt&&self.opt.id!==opt.id)self.items=[];$(document).on('touchstart mousedown',onclick);self.opt=opt;input.prop('placeholder',opt.placeholder||config.placeholder);prevclass&&self.rclass(prevclass);prevclass=null;if(opt.class){prevclass=opt.class;self.aclass(opt.class)}self.rclass('hidden');if(opt.recent==null)opt.recent='3 days';if(opt.clear)input.val('');if(!self.items||!self.items.length){selectedindex=0;if(recent&&recent.length)self.render(recent,true);else{self.render([]);opt.init&&self.search('')}}var w=((WW/(isMOBILE?1.1:1.3))>>0);search.css({width:w,left:((WW-w)/2)});scroller.css({width:w+50,'max-height':(WH/(isMOBILE?2.3:1.3))>>0});setTimeout(function(){self.aclass(cls+'-visible')},100);setTimeout(function(){input.focus()},500);is=true;$('html,body').aclass(cls+'-noscroll')};self.hide=function(sleep){if(is){clearTimeout(timeout);timeout=setTimeout(function(){$(document).off('touchstart mousedown',onclick);self.aclass('hidden').rclass(cls+'-visible');is=false;$('html,body').rclass(cls+'-noscroll')},sleep?sleep:100)}}});

COMPONENT('tabmenu','class:selected;selector:li',function(self,config,cls){var old,oldtab;self.readonly();self.nocompile();self.make=function(){self.aclass(cls);self.event('click',config.selector,function(){if(!config.disabled){var el=$(this);if(!el.hclass(config.class)){var val=el.attrd('value');if(config.exec)self.EXEC(config.exec,val);else self.set(val)}}});var scr=self.find('script');if(scr.length){self.template=Tangular.compile(scr.html());scr.remove()}};self.configure=function(key,value){switch(key){case'disabled':self.tclass('ui-disabled',!!value);break;case'datasource':self.datasource(value,function(path,value){if(value instanceof Array){var builder=[];for(var i=0;i<value.length;i++)builder.push(self.template(value[i]));old=null;self.html(builder.join(''));self.refresh()}},true);break}};self.setter=function(value){if(old===value)return;oldtab&&oldtab.rclass(config.class);oldtab=self.find(config.selector+'[data-value="'+value+'"]').aclass(config.class);old=value}});

COMPONENT('textboxlist','maxlength:100;required:false;error:You reach the maximum limit;movable:false',function(self,config,cls){var container,content,empty={},skip=false,cempty=cls+'-empty',crequired='required',helper=null,cls2='.'+cls;self.setter=null;self.getter=null;self.nocompile&&self.nocompile();self.template=Tangular.compile(('<div class="{0}-item"><div>'+(config.movable?'<i class="ti ti-angle-up {0}-up"></i><i class="ti ti-angle-down {0}-down"></i>':'')+'<i class="ti ti-trash {0}-remove"></i></div><div><input type="text" maxlength="{{ max}}" placeholder="{{ placeholder}}"{{ if disabled}} disabled="disabled"{{ fi}} value="{{ value}}" /></div></div>').format(cls));self.configure=function(key,value,init,prev){if(init)return;var redraw=false;switch(key){case'disabled':self.tclass(crequired,value);self.find('input').prop('disabled',true);empty.disabled=value;self.reset();break;case'maxlength':empty.max=value;self.find('input').prop(key,value);break;case'placeholder':empty.placeholder=value;self.find('input').prop(key,value);break;case'label':redraw=true;break;case'icon':if(value&&prev)self.find('i').rclass().aclass(value);else redraw=true;break}if(redraw){skip=false;self.redraw();self.refresh()}};self.redraw=function(){var icon='',html=config.label||content;if(config.icon)icon='<i class="{0}"></i>'.format(self.faicon(config.icon));empty.value='';self.tclass(cls+'-movable',!!config.movable);self.html((html?('<div class="'+cls+'-label{2}">{1}{0}:</div>').format(html,icon,config.required?(' '+cls+'-required'):''):'')+('<div class="'+cls+'-items"></div>'+self.template(empty).replace('-item"','-item '+cls+'-base"')));container=self.find(cls2+'-items')};self.make=function(){empty.max=config.max;empty.placeholder=config.placeholder;empty.value='';empty.disabled=config.disabled;if(config.disabled)self.aclass('ui-disabled');content=self.html();self.aclass(cls);self.redraw();self.move=function(offset,el){var arr=self.get();var index=el.index();var tmp;if(offset===1){if(arr[index]==null||arr[index+1]==null)return}else{if(arr[index]==null||arr[index-1]==null)return}tmp=arr[index];arr[index]=arr[index+offset];arr[index+offset]=tmp;var items=self.find(cls2+'-item');items.eq(index).find('input').val(arr[index]);items.eq(index+offset).find('input').val(arr[index+offset]);UPD(self.path,2);self.change(true)};self.event('click',cls2+'-up',function(){self.move(-1,$(this).closest(cls2+'-item'))});self.event('click',cls2+'-down',function(){self.move(1,$(this).closest(cls2+'-item'))});self.event('click',cls2+'-remove',function(){if(config.disabled)return;var el=$(this);var parent=el.closest(cls2+'-item');var value=parent.find('input').val();var arr=self.get();helper!=null&&helper.remove();helper=null;parent.remove();var index=arr.indexOf(value);if(index===-1)return;arr.splice(index,1);self.tclass(cempty,!arr.length);self.tclass(crequired,config.required&&!arr.length);skip=true;SET(self.path,arr,2);self.change(true)});self.event('change keypress blur','input',function(e){if((e.type==='keypress'&&e.which!==13)||config.disabled)return;var el=$(this);var value=this.value.trim();if(!value)return;var arr=[],base=el.closest(cls2+'-base');var len=base.length>0;if(len&&e.type==='change')return;var raw=self.get();if(config.limit&&len&&raw.length>=config.limit){if(!helper){base.after(('<div class="'+cls+'-helper"><i class="ti ti-warning" aria-hidden="true"></i> {0}</div>').format(config.error));helper=container.closest(cls2).find(cls2+'-helper')}return}if(len){if(!raw||raw.indexOf(value)===-1)self.push(value);this.value='';self.change(true);return}skip=true;container.find('input').each(function(){var temp=this.value.trim();switch(config.type){case'lower':temp=temp.toLowerCase();break;case'upper':temp=temp.toUpperCase();break;case'number':temp=temp.parseInt();break;case'date':temp=temp.parseDate();break;case'a-z':temp=temp.toLowerCase().replace(/[^a-z]/g,'');break}if(arr.indexOf(temp)===-1)arr.push(temp);else skip=false});self.set(arr,2);self.change(true)})};self.setter=function(value){if(skip){skip=false;return}if(!value||!value.length){self.aclass(cempty);config.required&&self.aclass(crequired);container.empty();return}self.rclass(cempty);self.rclass(crequired);var builder=[];for(var i=0;i<value.length;i++){empty.value=value[i];builder.push(self.template(empty))}container.empty().append(builder.join(''))};self.validate=function(value,init){if(init)return true;var valid=!config.required,items=container.children();if(!value||!value.length)return valid;for(var i=0;i<value.length;i++){var item=value[i];!item&&(item='');switch(config.type){case'email':valid=item.isEmail();break;case'url':valid=item.isURL();break;case'currency':case'number':valid=item>0;break;case'date':valid=item instanceof Date&&!isNaN(item.getTime());break;default:valid=item.length>0;break}items.eq(i).tclass(cls+'-item-invalid',!valid)}return valid}});

COMPONENT('validate','delay:100;flags:visible;changes:0;strictchanges:0',function(self,config,cls){var elements=null,def='button[name="submit"]',flags=null,tracked=false,reset=0,old,track,currentvalue;self.readonly();self.make=function(){elements=self.find(config.selector||def)};self.configure=function(key,value,init){switch(key){case'selector':if(!init)elements=self.find(value||def);break;case'flags':if(value){flags=value.split(',');for(var i=0;i<flags.length;i++)flags[i]='@'+flags[i]}else flags=null;break;case'track':track=value.split(',').trim();break}};var settracked=function(){tracked=0};var backup=null,current=null;self.setter=function(value,path,type){currentvalue=value;var is=path===self.path||path.length<self.path.length;if(config.changes){current=STRINGIFY(value,config.strictchanges!=true);if(is)backup=current;else is=backup===current}if(reset!==is){reset=is;self.tclass(cls+'-modified',!reset)}if((type===1||type===2)&&track&&track.length){for(var i=0;i<track.length;i++){if(path.indexOf(track[i])!==-1){tracked=1;return}}if(tracked===1){tracked=2;setTimeout(settracked,config.delay*3)}}};var check=function(){var path=self.path.replace(/\.\*$/,'');var disabled=tracked||config.validonly?!VALID(path,flags):DISABLED(path,flags);if(!disabled&&config.if)disabled=!EVALUATE(path,config.if);if(!disabled&&config.changes&&backup===current)disabled=true;if(HIDDEN(self.element))disabled=true;if(disabled!==old){elements.prop('disabled',disabled);self.tclass(cls+'-ok',!disabled);self.tclass(cls+'-no',disabled);old=disabled;if(!old&&config.exec)self.SEEX(config.exec,currentvalue);config.output&&self.SEEX(config.output,!disabled)}};self.state=function(type,what){if(type===3||what===3){self.rclass(cls+'-modified');tracked=0;backup=current}setTimeout2(self.ID,check,config.delay)}});

COMPONENT('validation','delay:100;flags:visible;changes:0;strictchanges:0',function(self,config,cls){var elements=null,def='button[name="submit"]',flags=null,tracked=false,reset=0,old,track,currentvalue;self.readonly();self.make=function(){elements=self.find(config.selector||def)};self.configure=function(key,value,init){switch(key){case'selector':if(!init)elements=self.find(value||def);break;case'flags':if(value){flags=value.split(',');for(var i=0;i<flags.length;i++)flags[i]='@'+flags[i]}else flags=null;break;case'track':track=value.split(',').trim();break}};var settracked=function(){tracked=0};var backup=null,current=null;self.setter=function(value,path,type){currentvalue=value;var is=path===self.path||path.length<self.path.length;if(config.changes){current=STRINGIFY(value,config.strictchanges!=true);if(is)backup=current;else is=backup===current}if(reset!==is){reset=is;self.tclass(cls+'-modified',!reset)}if((type===1||type===2)&&track&&track.length){for(var i=0;i<track.length;i++){if(path.indexOf(track[i])!==-1){tracked=1;return}}if(tracked===1){tracked=2;setTimeout(settracked,config.delay*3)}}};var check=function(){var path=self.path.replace(/\.\*$/,'');var disabled=tracked||config.validonly?!VALID(path,flags):DISABLED(path,flags);if(!disabled&&config.if)disabled=!EVALUATE(path,config.if);if(!disabled&&config.changes&&backup===current)disabled=true;if(HIDDEN(self.element))disabled=true;if(disabled!==old){elements.prop('disabled',disabled);self.tclass(cls+'-ok',!disabled);self.tclass(cls+'-no',disabled);old=disabled;if(!old&&config.exec)self.SEEX(config.exec,currentvalue);config.output&&self.SEEX(config.output,!disabled)}};self.state=function(type,what){if(type===3||what===3){self.rclass(cls+'-modified');tracked=0;backup=current}setTimeout2(self.ID,check,config.delay)}});

COMPONENT('viewbox','margin:0;scroll:true;delay:100;resizedelay:200;initdelay:250;scrollbar:1;visibleY:1;height:100;invisible:1',function(self,config,cls){var eld,elb,scrollbar,cls2='.'+cls,init=false,cache,scrolltoforce;self.readonly();self.init=function(){var resize=function(){for(var i=0;i<M.components.length;i++){var com=M.components[i];if(com.name==='viewbox'&&com.dom.offsetParent&&com.$ready&&!com.$removed)com.resizeforce()}};ON('resize2',function(){setTimeout2('viewboxresize',resize,200)})};self.destroy=function(){scrollbar&&scrollbar.destroy()};self.configure=function(key,value,init){switch(key){case'disabled':eld.tclass('hidden',!value);break;case'minheight':case'margin':case'marginxs':case'marginsm':case'marginmd':case'marginlg':!init&&self.resizeforce();break;case'selector':config.parent=value;self.resize();break}};self.scrollbottom=function(val){if(val==null)return elb[0].scrollTop;elb[0].scrollTop=(elb[0].scrollHeight-self.dom.clientHeight)-(val||0);return elb[0].scrollTop};self.scrolltop=function(val){if(val==null)return elb[0].scrollTop;elb[0].scrollTop=(val||0);return elb[0].scrollTop};self.make=function(){var centered='';if(config.centered)centered='<div><div class="{0}-centered-table"><div class="{0}-centered-cell"></div></div></div>'.format(cls);config.invisible&&self.aclass('invisible');config.scroll&&MAIN.version>17&&self.element.wrapInner('<div class="'+cls+'-body">'+centered+'</div>');self.element.prepend('<div class="'+cls+'-disabled hidden"></div>');eld=self.find('> .{0}-disabled'.format(cls)).eq(0);elb=self.find('> .{0}-body'.format(cls)).eq(0);self.aclass('{0} {0}-hidden'.format(cls));if(config.scroll){if(config.scrollbar){if(MAIN.version>17){scrollbar=W.SCROLLBAR(self.find(cls2+'-body'),{shadow:config.scrollbarshadow,visibleY:config.visibleY,visibleX:config.visibleX,orientation:config.visibleX?null:'y',parent:self.element});self.scrollbar=scrollbar;self.scrolltop=scrollbar.scrollTop;self.scrollbottom=scrollbar.scrollBottom}else self.aclass(cls+'-scroll')}else{self.aclass(cls+'-scroll');if(M.version<19)self.find(cls2+'-body').aclass('noscrollbar')}}self.resize()};self.released=function(is){!is&&self.resize()};var css={};self.resize=function(){setTimeout2(self.ID,self.resizeforce,config.resizedelay)};self.resizeforce=function(){var el=self.parent(config.parent);var h=el.height();var w=el.width();var width=WIDTH();var mywidth=self.element.width();var key=width+'x'+mywidth+'x'+w+'x'+h+'x'+config.margin;if(cache===key){scrollbar&&scrollbar.resize();if(scrolltoforce){if(scrolltoforce==='bottom')self.scrollbottom(0);else self.scrolltop(0);scrolltoforce=null}return}cache=key;var margin=config.margin,responsivemargin=config['margin'+width];if(responsivemargin!=null)margin=responsivemargin;if(margin==='auto')margin=self.element.offset().top;if(h===0||w===0){self.$waiting&&clearTimeout(self.$waiting);self.$waiting=setTimeout(self.resize,234);return}h=((h/100)*config.height)-margin;if(config.minheight&&h<config.minheight)h=config.minheight;if(config.centered)elb.find(cls2+'-centered-table').css('min-height',h);css.height=h;css.width=mywidth;eld.css(css);css.width='';self.css(css);elb.length&&elb.css(css);self.element.SETTER('*','resize');var c=cls+'-hidden';self.hclass(c)&&self.rclass(c,100);scrollbar&&scrollbar.resize();if(scrolltoforce){if(scrolltoforce==='bottom')self.scrollbottom(0);else self.scrolltop(0);scrolltoforce=null}if(!init){self.rclass('invisible',config.initdelay);init=true}};self.resizescrollbar=function(){scrollbar&&scrollbar.resize()};self.setter=function(){scrolltoforce=config.scrollto||config.scrolltop;if(scrolltoforce){if(scrolltoforce==='bottom')self.scrollbottom(0);else self.scrolltop(0);scrolltoforce=null}setTimeout(self.resize,config.delay,scrolltoforce)}});